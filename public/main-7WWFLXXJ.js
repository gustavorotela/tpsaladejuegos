import{$ as he,$a as Vf,A as ff,Aa as Sf,B as Ka,Ba as Es,C as pf,Ca as Ts,D as Ln,Da as bf,E as Fn,Ea as Cf,F as Fr,Fa as zr,G as Qa,Ga as Rf,H as Un,Ha as Df,I as gf,Ia as Pf,J as vs,Ja as Nf,K as Ot,Ka as K,L as Ja,La as kf,M as mf,Ma as rc,N as yf,Na as ee,O as vf,Oa as J,P as et,Pa as As,Q as _f,Qa as He,R as re,Ra as ic,S as W,Sa as we,T as Ya,Ta as Of,U as x,Ua as Mf,V as Re,Va as jn,W as If,Wa as Bn,X as U,Xa as $n,Y as Xa,Ya as sc,Z as z,Za as Be,_ as T,_a as Gr,a as v,aa as Ur,ab as Ss,b as G,ba as jr,bb as bs,ca as je,cb as oc,d as Nt,da as De,db as xf,e as h,ea as Mt,eb as ac,f as af,fa as Br,fb as cc,g as cf,ga as Vt,gb as Hr,h as Ba,ha as wf,hb as Lf,i as $a,ia as _s,ib as uc,j as qa,ja as rn,jb as qn,k as nn,ka as Is,kb as Ff,l as Fe,la as $r,lb as Uf,m as uf,ma as Ge,mb as $e,n as lf,na as Za,nb as Cs,o as kt,oa as ws,ob as jf,p as za,pa as mt,pb as lc,q as Ga,qa as Ef,qb as Bf,r as Ha,ra as ec,rb as hc,s as Ce,sa as Tf,sb as $f,t as S,ta as sn,u as Lr,ua as Af,v as hf,va as tc,w as df,wa as qr,x as V,xa as tt,y as Wa,ya as B,z as Ue,za as nc}from"./chunk-TJU5EDJS.js";var pc=class extends Uf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},gc=class t extends pc{static makeCurrent(){Ff(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Q_();return n==null?null:J_(n)}resetBaseElement(){Wr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jf(document.cookie,e)}},Wr=null;function Q_(){return Wr=Wr||document.querySelector("base"),Wr?Wr.getAttribute("href"):null}function J_(t){return new URL(t,document.baseURI).pathname}var Y_=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),mc=new U(""),Gf=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new W(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(z(mc),z(K))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),Rs=class{constructor(e){this._doc=e}},dc="ng-app-id",Hf=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hc(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${dc}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(dc),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(dc,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(z($e),z(ec),z(tc,8),z(sn))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),fc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vc=/%COMP%/g,Wf="%COMP%",X_=`_nghost-${Wf}`,Z_=`_ngcontent-${Wf}`,eI=!0,tI=new U("",{providedIn:"root",factory:()=>eI});function nI(t){return Z_.replace(vc,t)}function rI(t){return X_.replace(vc,t)}function Kf(t,e){return e.map(n=>n.replace(vc,t))}var Ds=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=hc(c),this.defaultRenderer=new Kr(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ur.ShadowDom&&(i=G(v({},i),{encapsulation:Ur.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Ps?s.applyToHost(r):s instanceof Qr&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Ur.Emulated:o=new Ps(u,l,i,this.appId,d,a,c,f);break;case Ur.ShadowDom:return new yc(u,l,r,i,a,c,this.nonce,f);default:o=new Qr(u,l,i,d,a,c,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(z(Gf),z(Hf),z(ec),z(tI),z($e),z(sn),z(K),z(tc))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),Kr=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(fc[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(qf(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(qf(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=fc[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=fc[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(qr.DashCase|qr.Important)?e.style.setProperty(n,r,i&qr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&qr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=qn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function qf(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var yc=class extends Kr{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Kf(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qr=class extends Kr{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Kf(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ps=class extends Qr{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=nI(u),this.hostAttr=rI(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},iI=(()=>{let e=class e extends Rs{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(z($e))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),zf=["alt","control","meta","shift"],sI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oI={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},aI=(()=>{let e=class e extends Rs{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),zf.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=sI[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),zf.forEach(a=>{if(a!==s){let c=oI[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(z($e))},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})();function Qf(t,e){return Lf(v({rootComponent:t},cI(e)))}function cI(t){return{appProviders:[...fI,...t?.providers??[]],platformProviders:dI}}function uI(){gc.makeCurrent()}function lI(){return new Za}function hI(){return Ef(document),document}var dI=[{provide:sn,useValue:Bf},{provide:Tf,useValue:uI,multi:!0},{provide:$e,useFactory:hI,deps:[]}];var fI=[{provide:wf,useValue:"root"},{provide:Za,useFactory:lI,deps:[]},{provide:mc,useClass:iI,multi:!0,deps:[$e,K,sn]},{provide:mc,useClass:aI,multi:!0,deps:[$e]},Ds,Hf,Gf,{provide:Es,useExisting:Ds},{provide:$f,useClass:Y_,deps:[]},[]];var Jf=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(z($e))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var b="primary",li=Symbol("RouteTitle"),Tc=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Kn(t){return new Tc(t)}function mI(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function yI(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!nt(t[n],e[n]))return!1;return!0}function nt(t,e){let n=t?Ac(t):void 0,r=e?Ac(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!np(t[i],e[i]))return!1;return!0}function Ac(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function np(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function rp(t){return t.length>0?t[t.length-1]:null}function Ft(t){return hf(t)?t:bs(t)?Ce(Promise.resolve(t)):S(t)}var vI={exact:sp,subset:op},ip={exact:_I,subset:II,ignored:()=>!0};function Yf(t,e,n){return vI[n.paths](t.root,e.root,n.matrixParams)&&ip[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function _I(t,e){return nt(t,e)}function sp(t,e,n){if(!an(t.segments,e.segments)||!Os(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!sp(t.children[r],e.children[r],n))return!1;return!0}function II(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>np(t[n],e[n]))}function op(t,e,n){return ap(t,e,e.segments,n)}function ap(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!an(i,n)||e.hasChildren()||!Os(i,n,r))}else if(t.segments.length===n.length){if(!an(t.segments,n)||!Os(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!op(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!an(t.segments,i)||!Os(t.segments,i,r)||!t.children[b]?!1:ap(t.children[b],e,s,r)}}function Os(t,e,n){return e.every((r,i)=>ip[n](t[i].parameters,r.parameters))}var xt=class{constructor(e=new O([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Kn(this.queryParams),this._queryParamMap}toString(){return TI.serialize(this)}},O=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ms(this)}},on=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Kn(this.parameters),this._parameterMap}toString(){return up(this)}};function wI(t,e){return an(t,e)&&t.every((n,r)=>nt(n.parameters,e[r].parameters))}function an(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function EI(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===b&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==b&&(n=n.concat(e(i,r)))}),n}var Jc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>new xs,providedIn:"root"});let t=e;return t})(),xs=class{parse(e){let n=new bc(e);return new xt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Jr(e.root,!0)}`,r=bI(e.queryParams),i=typeof e.fragment=="string"?`#${AI(e.fragment)}`:"";return`${n}${r}${i}`}},TI=new xs;function Ms(t){return t.segments.map(e=>up(e)).join("/")}function Jr(t,e){if(!t.hasChildren())return Ms(t);if(e){let n=t.children[b]?Jr(t.children[b],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==b&&r.push(`${i}:${Jr(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=EI(t,(r,i)=>i===b?[Jr(t.children[b],!1)]:[`${i}:${Jr(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[b]!=null?`${Ms(t)}/${n[0]}`:`${Ms(t)}/(${n.join("//")})`}}function cp(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ns(t){return cp(t).replace(/%3B/gi,";")}function AI(t){return encodeURI(t)}function Sc(t){return cp(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vs(t){return decodeURIComponent(t)}function Xf(t){return Vs(t.replace(/\+/g,"%20"))}function up(t){return`${Sc(t.path)}${SI(t.parameters)}`}function SI(t){return Object.entries(t).map(([e,n])=>`;${Sc(e)}=${Sc(n)}`).join("")}function bI(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ns(n)}=${Ns(i)}`).join("&"):`${Ns(n)}=${Ns(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var CI=/^[^\/()?;#]+/;function _c(t){let e=t.match(CI);return e?e[0]:""}var RI=/^[^\/()?;=#]+/;function DI(t){let e=t.match(RI);return e?e[0]:""}var PI=/^[^=?&#]+/;function NI(t){let e=t.match(PI);return e?e[0]:""}var kI=/^[^&#]+/;function OI(t){let e=t.match(kI);return e?e[0]:""}var bc=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new O([],{}):new O([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[b]=new O(e,n)),r}parseSegment(){let e=_c(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new on(Vs(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=DI(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=_c(this.remaining);i&&(r=i,this.capture(r))}e[Vs(n)]=Vs(r)}parseQueryParam(e){let n=NI(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=OI(this.remaining);o&&(r=o,this.capture(r))}let i=Xf(n),s=Xf(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_c(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=b);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[b]:new O([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function lp(t){return t.segments.length>0?new O([],{[b]:t}):t}function hp(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=hp(i);if(r===b&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new O(t.segments,e);return MI(n)}function MI(t){if(t.numberOfChildren===1&&t.children[b]){let e=t.children[b];return new O(t.segments.concat(e.segments),e.children)}return t}function Qn(t){return t instanceof xt}function VI(t,e,n=null,r=null){let i=dp(t);return fp(i,e,n,r)}function dp(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new O(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=lp(r);return e??i}function fp(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ic(i,i,i,n,r);let s=xI(e);if(s.toRoot())return Ic(i,i,new O([],{}),n,r);let o=LI(s,i,t),a=o.processChildren?Zr(o.segmentGroup,o.index,s.commands):gp(o.segmentGroup,o.index,s.commands);return Ic(i,o.segmentGroup,a,n,r)}function Ls(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ni(t){return typeof t=="object"&&t!=null&&t.outlets}function Ic(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=pp(t,e,n);let a=lp(hp(o));return new xt(a,s,i)}function pp(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=pp(s,e,n)}),new O(t.segments,r)}var Fs=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ls(r[0]))throw new W(4003,!1);let i=r.find(ni);if(i&&i!==rp(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xI(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Fs(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Fs(n,e,r)}var Hn=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function LI(t,e,n){if(t.isAbsolute)return new Hn(e,!0,0);if(!n)return new Hn(e,!1,NaN);if(n.parent===null)return new Hn(n,!0,0);let r=Ls(t.commands[0])?0:1,i=n.segments.length-1+r;return FI(n,i,t.numberOfDoubleDots)}function FI(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new Hn(r,!1,i-s)}function UI(t){return ni(t[0])?t[0].outlets:{[b]:t}}function gp(t,e,n){if(t??=new O([],{}),t.segments.length===0&&t.hasChildren())return Zr(t,e,n);let r=jI(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new O(t.segments.slice(0,r.pathIndex),{});return s.children[b]=new O(t.segments.slice(r.pathIndex),t.children),Zr(s,0,i)}else return r.match&&i.length===0?new O(t.segments,{}):r.match&&!t.hasChildren()?Cc(t,e,n):r.match?Zr(t,0,i):Cc(t,e,n)}function Zr(t,e,n){if(n.length===0)return new O(t.segments,{});{let r=UI(n),i={};if(Object.keys(r).some(s=>s!==b)&&t.children[b]&&t.numberOfChildren===1&&t.children[b].segments.length===0){let s=Zr(t.children[b],e,n);return new O(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=gp(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new O(t.segments,i)}}function jI(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(ni(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!ep(c,u,o))return s;r+=2}else{if(!ep(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cc(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(ni(s)){let c=BI(s.outlets);return new O(r,c)}if(i===0&&Ls(n[0])){let c=t.segments[e];r.push(new on(c.path,Zf(n[0]))),i++;continue}let o=ni(s)?s.outlets[b]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ls(a)?(r.push(new on(o,Zf(a))),i+=2):(r.push(new on(o,{})),i++)}return new O(r,{})}function BI(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Cc(new O([],{}),0,r))}),e}function Zf(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ep(t,e,n){return t==n.path&&nt(e,n.parameters)}var ei="imperative",de=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(de||{}),qe=class{constructor(e,n){this.id=e,this.url=n}},ri=class extends qe{constructor(e,n,r="imperative",i=null){super(e,n),this.type=de.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},cn=class extends qe{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=de.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ke=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ke||{}),Rc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Rc||{}),Lt=class extends qe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=de.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},un=class extends qe{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=de.NavigationSkipped}},ii=class extends qe{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=de.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Us=class extends qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=de.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dc=class extends qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=de.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pc=class extends qe{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=de.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Nc=class extends qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=de.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kc=class extends qe{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=de.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Oc=class{constructor(e){this.route=e,this.type=de.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mc=class{constructor(e){this.route=e,this.type=de.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vc=class{constructor(e){this.snapshot=e,this.type=de.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xc=class{constructor(e){this.snapshot=e,this.type=de.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lc=class{constructor(e){this.snapshot=e,this.type=de.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fc=class{constructor(e){this.snapshot=e,this.type=de.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var si=class{},oi=class{constructor(e){this.url=e}};var Uc=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Gs,this.attachRef=null}},Gs=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Uc,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),js=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=jc(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=jc(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Bc(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Bc(e,this._root).map(n=>n.value)}};function jc(t,e){if(t===e.value)return e;for(let n of e.children){let r=jc(t,n);if(r)return r}return null}function Bc(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Bc(t,n);if(r.length)return r.unshift(e),r}return[]}var Ne=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Gn(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Bs=class extends js{constructor(e,n){super(e),this.snapshot=n,Xc(this,e)}toString(){return this.snapshot.toString()}};function mp(t){let e=$I(t),n=new Fe([new on("",{})]),r=new Fe({}),i=new Fe({}),s=new Fe({}),o=new Fe(""),a=new Jn(n,r,s,o,i,b,t,e.root);return a.snapshot=e.root,new Bs(new Ne(a,[]),e)}function $I(t){let e={},n={},r={},i="",s=new ai([],e,r,i,n,b,t,null,{});return new $s("",new Ne(s,[]))}var Jn=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(V(u=>u[li]))??S(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(e=>Kn(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(e=>Kn(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yc(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:v(v({},e.params),t.params),data:v(v({},e.data),t.data),resolve:v(v(v(v({},t.data),e.data),i?.data),t._resolvedData)}:r={params:v({},t.params),data:v({},t.data),resolve:v(v({},t.data),t._resolvedData??{})},i&&vp(i)&&(r.resolve[li]=i.title),r}var ai=class{get title(){return this.data?.[li]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Kn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Kn(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},$s=class extends js{constructor(e,n){super(n),this.url=e,Xc(this,n)}toString(){return yp(this._root)}};function Xc(t,e){e.value._routerState=t,e.children.forEach(n=>Xc(t,n))}function yp(t){let e=t.children.length>0?` { ${t.children.map(yp).join(", ")} } `:"";return`${t.value}${e}`}function wc(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,nt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),nt(e.params,n.params)||t.paramsSubject.next(n.params),yI(e.url,n.url)||t.urlSubject.next(n.url),nt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function $c(t,e){let n=nt(t.params,e.params)&&wI(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||$c(t.parent,e.parent))}function vp(t){return typeof t.title=="string"||t.title===null}var Zc=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=b,this.activateEvents=new mt,this.deactivateEvents=new mt,this.attachEvents=new mt,this.detachEvents=new mt,this.parentContexts=T(Gs),this.location=T(Cf),this.changeDetector=T(Hr),this.environmentInjector=T(_s),this.inputBinder=T(eu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new qc(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Mt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Is]});let t=e;return t})(),qc=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Jn?this.route:e===Gs?this.childContexts:this.parent.get(e,n)}},eu=new U("");function qI(t,e,n){let r=ci(t,e._root,n?n._root:void 0);return new Bs(r,e)}function ci(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=zI(t,e,n);return new Ne(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ci(t,a)),o}}let r=GI(e.value),i=e.children.map(s=>ci(t,s));return new Ne(r,i)}}function zI(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ci(t,r,i);return ci(t,r)})}function GI(t){return new Jn(new Fe(t.url),new Fe(t.params),new Fe(t.queryParams),new Fe(t.fragment),new Fe(t.data),t.outlet,t.component,t)}var _p="ngNavigationCancelingError";function Ip(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Qn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wp(!1,ke.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function wp(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[_p]=!0,n.cancellationCode=e,n}function HI(t){return Ep(t)&&Qn(t.url)}function Ep(t){return!!t&&t[_p]}var WI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=je({type:e,selectors:[["ng-component"]],standalone:!0,features:[Be],decls:1,vars:0,template:function(i,s){i&1&&As(0,"router-outlet")},dependencies:[Zc],encapsulation:2});let t=e;return t})();function KI(t,e){return t.providers&&!t._injector&&(t._injector=Df(t.providers,e,`Route: ${t.path}`)),t._injector??e}function tu(t){let e=t.children&&t.children.map(tu),n=e?G(v({},t),{children:e}):v({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==b&&(n.component=WI),n}function rt(t){return t.outlet||b}function QI(t,e){let n=t.filter(r=>rt(r)===e);return n.push(...t.filter(r=>rt(r)!==e)),n}function hi(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var JI=(t,e,n,r)=>V(i=>(new zc(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),zc=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),wc(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Gn(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Gn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Gn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Gn(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Fc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new xc(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(wc(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),wc(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=hi(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},qs=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Wn=class{constructor(e,n){this.component=e,this.route=n}};function YI(t,e,n){let r=t._root,i=e?e._root:null;return Yr(r,i,n,[r.value])}function XI(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Xn(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!If(t)?t:e.get(t):r}function Yr(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Gn(e);return t.children.forEach(o=>{ZI(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ti(a,n.getContext(o),i)),i}function ZI(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=ew(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new qs(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Yr(t,e,a?a.children:null,r,i):Yr(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Wn(a.outlet.component,o))}else o&&ti(e,a,i),i.canActivateChecks.push(new qs(r)),s.component?Yr(t,null,a?a.children:null,r,i):Yr(t,null,n,r,i);return i}function ew(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!an(t.url,e.url);case"pathParamsOrQueryParamsChange":return!an(t.url,e.url)||!nt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$c(t,e)||!nt(t.queryParams,e.queryParams);case"paramsChange":default:return!$c(t,e)}}function ti(t,e,n){let r=Gn(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ti(o,e.children.getContext(s),n):ti(o,null,n):ti(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Wn(e.outlet.component,i)):n.canDeactivateChecks.push(new Wn(null,i)):n.canDeactivateChecks.push(new Wn(null,i))}function di(t){return typeof t=="function"}function tw(t){return typeof t=="boolean"}function nw(t){return t&&di(t.canLoad)}function rw(t){return t&&di(t.canActivate)}function iw(t){return t&&di(t.canActivateChild)}function sw(t){return t&&di(t.canDeactivate)}function ow(t){return t&&di(t.canMatch)}function Tp(t){return t instanceof df||t?.name==="EmptyError"}var ks=Symbol("INITIAL_VALUE");function Yn(){return et(t=>Wa(t.map(e=>e.pipe(Un(1),vf(ks)))).pipe(V(e=>{for(let n of e)if(n!==!0){if(n===ks)return ks;if(n===!1||n instanceof xt)return n}return!0}),Ln(e=>e!==ks),Un(1)))}function aw(t,e){return Ue(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?S(G(v({},n),{guardsResult:!0})):cw(o,r,i,t).pipe(Ue(a=>a&&tw(a)?uw(r,s,t,e):S(a)),V(a=>G(v({},n),{guardsResult:a})))})}function cw(t,e,n,r){return Ce(t).pipe(Ue(i=>pw(i.component,i.route,n,e,r)),Ot(i=>i!==!0,!0))}function uw(t,e,n,r){return Ce(e).pipe(Fr(i=>ff(hw(i.route.parent,r),lw(i.route,r),fw(t,i.path,n),dw(t,i.route,n))),Ot(i=>i!==!0,!0))}function lw(t,e){return t!==null&&e&&e(new Lc(t)),S(!0)}function hw(t,e){return t!==null&&e&&e(new Vc(t)),S(!0)}function dw(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return S(!0);let i=r.map(s=>Ka(()=>{let o=hi(e)??n,a=Xn(s,o),c=rw(a)?a.canActivate(e,t):rn(o,()=>a(e,t));return Ft(c).pipe(Ot())}));return S(i).pipe(Yn())}function fw(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>XI(o)).filter(o=>o!==null).map(o=>Ka(()=>{let a=o.guards.map(c=>{let u=hi(o.node)??n,l=Xn(c,u),d=iw(l)?l.canActivateChild(r,t):rn(u,()=>l(r,t));return Ft(d).pipe(Ot())});return S(a).pipe(Yn())}));return S(s).pipe(Yn())}function pw(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return S(!0);let o=s.map(a=>{let c=hi(e)??i,u=Xn(a,c),l=sw(u)?u.canDeactivate(t,e,n,r):rn(c,()=>u(t,e,n,r));return Ft(l).pipe(Ot())});return S(o).pipe(Yn())}function gw(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return S(!0);let s=i.map(o=>{let a=Xn(o,t),c=nw(a)?a.canLoad(e,n):rn(t,()=>a(e,n));return Ft(c)});return S(s).pipe(Yn(),Ap(r))}function Ap(t){return cf(re(e=>{if(Qn(e))throw Ip(t,e)}),V(e=>e===!0))}function mw(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return S(!0);let s=i.map(o=>{let a=Xn(o,t),c=ow(a)?a.canMatch(e,n):rn(t,()=>a(e,n));return Ft(c)});return S(s).pipe(Yn(),Ap(r))}var ui=class{constructor(e){this.segmentGroup=e||null}},zs=class extends Error{constructor(e){super(),this.urlTree=e}};function zn(t){return Lr(new ui(t))}function yw(t){return Lr(new W(4e3,!1))}function vw(t){return Lr(wp(!1,ke.GuardRejected))}var Gc=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return S(r);if(i.numberOfChildren>1||!i.children[b])return yw(e.redirectTo);i=i.children[b]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new zs(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new xt(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new O(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Hc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _w(t,e,n,r,i){let s=nu(t,e,n);return s.matched?(r=KI(e,r),mw(r,e,n,i).pipe(V(o=>o===!0?s:v({},Hc)))):S(s)}function nu(t,e,n){if(e.path==="**")return Iw(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?v({},Hc):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||mI)(n,t,e);if(!i)return v({},Hc);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?v(v({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Iw(t){return{matched:!0,parameters:t.length>0?rp(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function tp(t,e,n,r){return n.length>0&&Tw(t,n,r)?{segmentGroup:new O(e,Ew(r,new O(n,t.children))),slicedSegments:[]}:n.length===0&&Aw(t,n,r)?{segmentGroup:new O(t.segments,ww(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new O(t.segments,t.children),slicedSegments:n}}function ww(t,e,n,r){let i={};for(let s of n)if(Hs(t,e,s)&&!r[rt(s)]){let o=new O([],{});i[rt(s)]=o}return v(v({},r),i)}function Ew(t,e){let n={};n[b]=e;for(let r of t)if(r.path===""&&rt(r)!==b){let i=new O([],{});n[rt(r)]=i}return n}function Tw(t,e,n){return n.some(r=>Hs(t,e,r)&&rt(r)!==b)}function Aw(t,e,n){return n.some(r=>Hs(t,e,r))}function Hs(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Sw(t,e,n,r){return rt(t)!==r&&(r===b||!Hs(e,n,t))?!1:nu(e,t,n).matched}function bw(t,e,n){return e.length===0&&!t.children[n]}var Wc=class{};function Cw(t,e,n,r,i,s,o="emptyOnly"){return new Kc(t,e,n,r,i,o,s).recognize()}var Rw=31,Kc=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Gc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=tp(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(V(n=>{let r=new ai([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,{},b,this.rootComponentType,null,{}),i=new Ne(r,n),s=new $s("",i),o=VI(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,b).pipe(Fn(r=>{if(r instanceof zs)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ui?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Yc(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(V(s=>s instanceof Ne?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Ce(i).pipe(Fr(s=>{let o=r.children[s],a=QI(n,s);return this.processSegmentGroup(e,a,o,s)}),yf((s,o)=>(s.push(...o),s)),Qa(null),mf(),Ue(s=>{if(s===null)return zn(r);let o=Sp(s);return Dw(o),S(o)}))}processSegment(e,n,r,i,s,o){return Ce(n).pipe(Fr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Fn(c=>{if(c instanceof ui)return S(null);throw c}))),Ot(a=>!!a),Fn(a=>{if(Tp(a))return bw(r,i,s)?S(new Wc):zn(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return Sw(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):zn(i):zn(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=nu(n,i,s);if(!a)return zn(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Rw&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ue(f=>this.processSegment(e,r,n,f.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=_w(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(et(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(et(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:f}=a,m=new ai(l,f,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,Nw(r),rt(r),r.component??r._loadedComponent??null,r,kw(r)),{segmentGroup:A,slicedSegments:k}=tp(n,l,d,c);if(k.length===0&&A.hasChildren())return this.processChildren(u,c,A).pipe(V(F=>F===null?null:new Ne(m,F)));if(c.length===0&&k.length===0)return S(new Ne(m,[]));let P=rt(r)===s;return this.processSegment(u,c,A,k,P?b:s,!0).pipe(V(F=>new Ne(m,F instanceof Ne?[F]:[])))}))):zn(n)))}getChildConfig(e,n,r){return n.children?S({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?S({routes:n._loadedRoutes,injector:n._loadedInjector}):gw(e,n,r,this.urlSerializer).pipe(Ue(i=>i?this.configLoader.loadChildren(e,n).pipe(re(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):vw(n))):S({routes:[],injector:e})}};function Dw(t){t.sort((e,n)=>e.value.outlet===b?-1:n.value.outlet===b?1:e.value.outlet.localeCompare(n.value.outlet))}function Pw(t){let e=t.value.routeConfig;return e&&e.path===""}function Sp(t){let e=[],n=new Set;for(let r of t){if(!Pw(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Sp(r.children);e.push(new Ne(r.value,i))}return e.filter(r=>!n.has(r))}function Nw(t){return t.data||{}}function kw(t){return t.resolve||{}}function Ow(t,e,n,r,i,s){return Ue(o=>Cw(t,e,n,r,o.extractedUrl,i,s).pipe(V(({state:a,tree:c})=>G(v({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Mw(t,e){return Ue(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return S(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of bp(c))o.add(u);let a=0;return Ce(o).pipe(Fr(c=>s.has(c)?Vw(c,r,t,e):(c.data=Yc(c,c.parent,t).resolve,S(void 0))),re(()=>a++),Ja(1),Ue(c=>a===o.size?S(n):kt))})}function bp(t){let e=t.children.map(n=>bp(n)).flat();return[t,...e]}function Vw(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!vp(i)&&(s[li]=i.title),xw(s,t,e,r).pipe(V(o=>(t._resolvedData=o,t.data=Yc(t,t.parent,n).resolve,null)))}function xw(t,e,n,r){let i=Ac(t);if(i.length===0)return S({});let s={};return Ce(i).pipe(Ue(o=>Lw(t[o],e,n,r).pipe(Ot(),re(a=>{s[o]=a}))),Ja(1),gf(s),Fn(o=>Tp(o)?kt:Lr(o)))}function Lw(t,e,n,r){let i=hi(e)??r,s=Xn(t,i),o=s.resolve?s.resolve(e,n):rn(i,()=>s(e,n));return Ft(o)}function Ec(t){return et(e=>{let n=t(e);return n?Ce(n).pipe(V(()=>e)):S(e)})}var Cp=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===b);return i}getResolvedTitleForRoute(r){return r.data[li]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>T(Fw),providedIn:"root"});let t=e;return t})(),Fw=(()=>{let e=class e extends Cp{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(z(Jf))},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ru=new U("",{providedIn:"root",factory:()=>({})}),iu=new U(""),Uw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=T(cc)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return S(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ft(r.loadComponent()).pipe(V(Rp),re(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),vs(()=>{this.componentLoaders.delete(r)})),s=new qa(i,()=>new nn).pipe($a());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return S({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=jw(i,this.compiler,r,this.onLoadEndListener).pipe(vs(()=>{this.childrenLoaders.delete(i)})),a=new qa(o,()=>new nn).pipe($a());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jw(t,e,n,r){return Ft(t.loadChildren()).pipe(V(Rp),Ue(i=>i instanceof Rf||Array.isArray(i)?S(i):Ce(e.compileModuleAsync(i))),V(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(iu,[],{optional:!0,self:!0}).flat()),{routes:o.map(tu),injector:s}}))}function Bw(t){return t&&typeof t=="object"&&"default"in t}function Rp(t){return Bw(t)?t.default:t}var su=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>T($w),providedIn:"root"});let t=e;return t})(),$w=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qw=new U("");var zw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nn,this.transitionAbortSubject=new nn,this.configLoader=T(Uw),this.environmentInjector=T(_s),this.urlSerializer=T(Jc),this.rootContexts=T(Gs),this.location=T(Cs),this.inputBindingEnabled=T(eu,{optional:!0})!==null,this.titleStrategy=T(Cp),this.options=T(ru,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=T(su),this.createViewTransition=T(qw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>S(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Oc(s)),i=s=>this.events.next(new Mc(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(G(v(v({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Fe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ei,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ln(o=>o.id!==0),V(o=>G(v({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),et(o=>{let a=!1,c=!1;return S(o).pipe(et(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ke.SupersededByNewNavigation),kt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?G(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new un(u.id,this.urlSerializer.serialize(u.rawUrl),f,Rc.IgnoredSameUrlNavigation)),u.resolve(null),kt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return S(u).pipe(et(f=>{let m=this.transitions?.getValue();return this.events.next(new ri(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?kt:Promise.resolve(f)}),Ow(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),re(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=G(v({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new Us(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:m,source:A,restoredState:k,extras:P}=u,F=new ri(f,this.urlSerializer.serialize(m),A,k);this.events.next(F);let le=mp(this.rootComponentType).snapshot;return this.currentTransition=o=G(v({},u),{targetSnapshot:le,urlAfterRedirects:m,extras:G(v({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,S(o)}else{let f="";return this.events.next(new un(u.id,this.urlSerializer.serialize(u.extractedUrl),f,Rc.IgnoredByUrlHandlingStrategy)),u.resolve(null),kt}}),re(u=>{let l=new Dc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),V(u=>(this.currentTransition=o=G(v({},u),{guards:YI(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),aw(this.environmentInjector,u=>this.events.next(u)),re(u=>{if(o.guardsResult=u.guardsResult,Qn(u.guardsResult))throw Ip(this.urlSerializer,u.guardsResult);let l=new Pc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Ln(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ke.GuardRejected),!1)),Ec(u=>{if(u.guards.canActivateChecks.length)return S(u).pipe(re(l=>{let d=new Nc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),et(l=>{let d=!1;return S(l).pipe(Mw(this.paramsInheritanceStrategy,this.environmentInjector),re({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",ke.NoDataFromResolver)}}))}),re(l=>{let d=new kc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Ec(u=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(re(m=>{d.component=m}),V(()=>{})));for(let m of d.children)f.push(...l(m));return f};return Wa(l(u.targetSnapshot.root)).pipe(Qa(null),Un(1))}),Ec(()=>this.afterPreactivation()),et(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?Ce(d).pipe(V(()=>o)):S(o)}),V(u=>{let l=qI(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=G(v({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),re(()=>{this.events.next(new si)}),JI(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Un(1),re({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new cn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),_f(this.transitionAbortSubject.pipe(re(u=>{throw u}))),vs(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",ke.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Fn(u=>{if(c=!0,Ep(u))this.events.next(new Lt(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),HI(u)?this.events.next(new oi(u.url)):o.resolve(!1);else{this.events.next(new ii(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return kt}))}))}cancelNavigationTransition(r,i,s){let o=new Lt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Gw(t){return t!==ei}var Hw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>T(Ww),providedIn:"root"});let t=e;return t})(),Qc=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Ww=(()=>{let e=class e extends Qc{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=$r(e)))(s||e)}})(),e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Dp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:()=>T(Kw),providedIn:"root"});let t=e;return t})(),Kw=(()=>{let e=class e extends Dp{constructor(){super(...arguments),this.location=T(Cs),this.urlSerializer=T(Jc),this.options=T(ru,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=T(su),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mp(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ri)this.stateMemento=this.createStateMemento();else if(r instanceof un)this.rawUrlTree=i.initialUrl;else if(r instanceof Us){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof si?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Lt&&(r.code===ke.GuardRejected||r.code===ke.NoDataFromResolver)?this.restoreHistory(i):r instanceof ii?this.restoreHistory(i,!0):r instanceof cn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=v(v({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=v(v({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=$r(e)))(s||e)}})(),e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xr=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Xr||{});function Qw(t,e){t.events.pipe(Ln(n=>n instanceof cn||n instanceof Lt||n instanceof ii||n instanceof un),V(n=>n instanceof cn||n instanceof un?Xr.COMPLETE:(n instanceof Lt?n.code===ke.Redirect||n.code===ke.SupersededByNewNavigation:!1)?Xr.REDIRECTING:Xr.FAILED),Ln(n=>n!==Xr.REDIRECTING),Un(1)).subscribe(()=>{e()})}function Jw(t){throw t}var Yw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},it=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=T(Ss),this.stateManager=T(Dp),this.options=T(ru,{optional:!0})||{},this.pendingTasks=T(Pf),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=T(zw),this.urlSerializer=T(Jc),this.location=T(Cs),this.urlHandlingStrategy=T(su),this._events=new nn,this.errorHandler=this.options.errorHandler||Jw,this.navigated=!1,this.routeReuseStrategy=T(Hw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=T(iu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!T(eu,{optional:!0}),this.eventsSubscription=new af,this.isNgZoneEnabled=T(K)instanceof K&&K.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Lt&&i.code!==ke.Redirect&&i.code!==ke.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof cn)this.navigated=!0;else if(i instanceof oi){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Gw(s.source)};this.scheduleNavigation(a,ei,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}eE(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ei,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=v({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(tu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=v(v({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=s?s.snapshot:this.routerState.snapshot.root;f=dp(m)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return fp(f,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Qn(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ei,null,i)}navigate(r,i={skipLocationChange:!1}){return Zw(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=v({},Yw):i===!1?s=v({},Xw):s=i,Qn(r))return Yf(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Yf(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((f,m)=>{c=f,u=m});let d=this.pendingTasks.add();return Qw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=x({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zw(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new W(4008,!1)}function eE(t){return!(t instanceof si)&&!(t instanceof oi)}var tE=new U("");function Pp(t,...e){return Br([{provide:iu,multi:!0,useValue:t},[],{provide:Jn,useFactory:nE,deps:[it]},{provide:xf,multi:!0,useFactory:rE},e.map(n=>n.\u0275providers)])}function nE(t){return t.routerState.root}function rE(){let t=T(Ge);return e=>{let n=t.get(ac);if(e!==n.components[0])return;let r=t.get(it),i=t.get(iE);t.get(sE)===1&&r.initialNavigation(),t.get(oE,null,Xa.Optional)?.setUpPreloading(),t.get(tE,null,Xa.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var iE=new U("",{factory:()=>new nn}),sE=new U("",{providedIn:"root",factory:()=>1});var oE=new U("");var Fp=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(B(Ts),B(ws))},e.\u0275dir=Mt({type:e});let t=e;return t})(),aE=(()=>{let e=class e extends Fp{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=$r(e)))(s||e)}})(),e.\u0275dir=Mt({type:e,features:[zr]});let t=e;return t})(),Up=new U("");var cE={provide:Up,useExisting:Ya(()=>er),multi:!0};function uE(){let t=qn()?qn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var lE=new U(""),er=(()=>{let e=class e extends Fp{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!uE())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(B(Ts),B(ws),B(lE,8))},e.\u0275dir=Mt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&He("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[sc([cE]),zr]});let t=e;return t})();var hE=new U(""),dE=new U("");function jp(t){return t!=null}function Bp(t){return bs(t)?Ce(t):t}function $p(t){let e={};return t.forEach(n=>{e=n!=null?v(v({},e),n):e}),Object.keys(e).length===0?null:e}function qp(t,e){return e.map(n=>n(t))}function fE(t){return!t.validate}function zp(t){return t.map(e=>fE(e)?e:n=>e.validate(n))}function pE(t){if(!t)return null;let e=t.filter(jp);return e.length==0?null:function(n){return $p(qp(n,e))}}function Gp(t){return t!=null?pE(zp(t)):null}function gE(t){if(!t)return null;let e=t.filter(jp);return e.length==0?null:function(n){let r=qp(n,e).map(Bp);return pf(r).pipe(V($p))}}function Hp(t){return t!=null?gE(zp(t)):null}function Np(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function mE(t){return t._rawValidators}function yE(t){return t._rawAsyncValidators}function au(t){return t?Array.isArray(t)?t:[t]:[]}function Ks(t,e){return Array.isArray(t)?t.includes(e):t===e}function kp(t,e){let n=au(e);return au(t).forEach(i=>{Ks(n,i)||n.push(i)}),n}function Op(t,e){return au(e).filter(n=>!Ks(t,n))}var Qs=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Gp(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},cu=class extends Qs{get formDirective(){return null}get path(){return null}},gi=class extends Qs{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},uu=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},vE={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mN=G(v({},vE),{"[class.ng-submitted]":"isSubmitted"}),Js=(()=>{let e=class e extends uu{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(B(gi,2))},e.\u0275dir=Mt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&kf("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[zr]});let t=e;return t})();var fi="VALID",Ws="INVALID",Zn="PENDING",pi="DISABLED";function _E(t){return(Ys(t)?t.validators:t)||null}function IE(t){return Array.isArray(t)?Gp(t):t||null}function wE(t,e){return(Ys(e)?e.asyncValidators:t)||null}function EE(t){return Array.isArray(t)?Hp(t):t||null}function Ys(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var lu=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===fi}get invalid(){return this.status===Ws}get pending(){return this.status==Zn}get disabled(){return this.status===pi}get enabled(){return this.status!==pi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(kp(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kp(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Op(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Op(e,this._rawAsyncValidators))}hasValidator(e){return Ks(this._rawValidators,e)}hasAsyncValidator(e){return Ks(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Zn,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=pi,this.errors=null,this._forEachChild(r=>{r.disable(G(v({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(G(v({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=fi,this._forEachChild(r=>{r.enable(G(v({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(G(v({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fi||this.status===Zn)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?pi:fi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Zn,this._hasOwnPendingAsyncValidator=!0;let n=Bp(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new mt,this.statusChanges=new mt}_calculateStatus(){return this._allControlsDisabled()?pi:this.errors?Ws:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zn)?Zn:this._anyControlsHaveStatus(Ws)?Ws:fi}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ys(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=IE(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=EE(this._rawAsyncValidators)}};var Wp=new U("CallSetDisabledState",{providedIn:"root",factory:()=>hu}),hu="always";function TE(t,e){return[...e.path,t]}function AE(t,e,n=hu){bE(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),CE(t,e),DE(t,e),RE(t,e),SE(t,e)}function Mp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function SE(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function bE(t,e){let n=mE(t);e.validator!==null?t.setValidators(Np(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=yE(t);e.asyncValidator!==null?t.setAsyncValidators(Np(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Mp(e._rawValidators,i),Mp(e._rawAsyncValidators,i)}function CE(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Kp(t,e)})}function RE(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Kp(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Kp(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function DE(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function PE(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function NE(t){return Object.getPrototypeOf(t.constructor)===aE}function kE(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===er?n=s:NE(s)?r=s:i=s}),i||r||n||null}function Vp(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xp(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var OE=class extends lu{constructor(e=null,n,r){super(_E(n),wE(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ys(n)&&(n.nonNullable||n.initialValueIsDefault)&&(xp(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Vp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Vp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ME={provide:gi,useExisting:Ya(()=>mi)},Lp=Promise.resolve(),mi=(()=>{let e=class e extends gi{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new OE,this._registered=!1,this.name="",this.update=new mt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=kE(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),PE(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){AE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Lp.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&uc(i);Lp.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?TE(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(B(cu,9),B(hE,10),B(dE,10),B(Up,10),B(Hr,8),B(Wp,8))},e.\u0275dir=Mt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[jr.None,"disabled","isDisabled"],model:[jr.None,"ngModel","model"],options:[jr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sc([ME]),zr,Is]});let t=e;return t})();var VE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=De({type:e}),e.\u0275inj=Re({});let t=e;return t})();var Xs=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Wp,useValue:r.callSetDisabledState??hu}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=De({type:e}),e.\u0275inj=Re({imports:[VE]});let t=e;return t})();var Yp=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xE=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Xp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,f=(a&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),r.push(n[l],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Yp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new fu;let f=s<<2|a>>4;if(r.push(f),u!==64){let m=a<<4&240|u>>2;if(r.push(m),d!==64){let A=u<<6&192|d;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},fu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},LE=function(t){let e=Yp(t);return Xp.encodeByteArray(e,!0)},yi=function(t){return LE(t).replace(/\./g,"")},gu=function(t){try{return Xp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function FE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var UE=()=>FE().__FIREBASE_DEFAULTS__,jE=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&gu(t[1]);return e&&JSON.parse(e)},eo=()=>{try{return UE()||jE()||BE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mu=t=>{var e,n;return(n=(e=eo())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Zp=t=>{let e=mu(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yu=()=>{var t;return(t=eo())===null||t===void 0?void 0:t.config},vu=t=>{var e;return(e=eo())===null||e===void 0?void 0:e[`_${t}`]};var Zs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function eg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yi(JSON.stringify(n)),yi(JSON.stringify(o)),""].join(".")}function te(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(te())}function $E(){var t;let e=(t=eo())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ng(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ig(){let t=te();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sg(){return!$E()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vi(){try{return typeof indexedDB=="object"}catch{return!1}}function to(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function og(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var qE="FirebaseError",Ee=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qE,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oe.prototype.create)}},Oe=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?zE(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ee(i,a,r)}};function zE(t,e){return t.replace(GE,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var GE=/\{\$([^}]+)}/g;function ag(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ln(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(Jp(s)&&Jp(o)){if(!ln(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function Jp(t){return t!==null&&typeof t=="object"}function _i(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tr(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function nr(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function cg(t,e){let n=new pu(t,e);return n.subscribe.bind(n)}var pu=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HE(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=du),i.error===void 0&&(i.error=du),i.complete===void 0&&(i.complete=du);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function HE(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function du(){}var _N=4*60*60*1e3;function ge(t){return t&&t._delegate?t._delegate:t}var ie=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var hn="[DEFAULT]";var _u=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Zs;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KE(e))try{this.getOrInitializeService({instanceIdentifier:hn})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=hn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return h(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=hn){return this.instances.has(e)}getOptions(e=hn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=hn){return this.component?this.component.multipleInstances?e:hn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function WE(t){return t===hn?void 0:t}function KE(t){return t.instantiationMode==="EAGER"}var no=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new _u(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var QE=[],R=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(R||{}),JE={debug:R.DEBUG,verbose:R.VERBOSE,info:R.INFO,warn:R.WARN,error:R.ERROR,silent:R.SILENT},YE=R.INFO,XE={[R.DEBUG]:"log",[R.VERBOSE]:"log",[R.INFO]:"info",[R.WARN]:"warn",[R.ERROR]:"error"},ZE=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=XE[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ut=class{constructor(e){this.name=e,this._logLevel=YE,this._logHandler=ZE,this._userLogHandler=null,QE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in R))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,R.DEBUG,...e),this._logHandler(this,R.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,R.VERBOSE,...e),this._logHandler(this,R.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,R.INFO,...e),this._logHandler(this,R.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,R.WARN,...e),this._logHandler(this,R.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,R.ERROR,...e),this._logHandler(this,R.ERROR,...e)}};var eT=(t,e)=>e.some(n=>t instanceof n),ug,lg;function tT(){return ug||(ug=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nT(){return lg||(lg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var hg=new WeakMap,wu=new WeakMap,dg=new WeakMap,Iu=new WeakMap,Tu=new WeakMap;function rT(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(We(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hg.set(n,t)}).catch(()=>{}),Tu.set(e,t),e}function iT(t){if(wu.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wu.set(t,e)}var Eu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return We(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fg(t){Eu=t(Eu)}function sT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(ro(this),e,...n);return dg.set(r,e.sort?e.sort():[e]),We(r)}:nT().includes(t)?function(...e){return t.apply(ro(this),e),We(hg.get(this))}:function(...e){return We(t.apply(ro(this),e))}}function oT(t){return typeof t=="function"?sT(t):(t instanceof IDBTransaction&&iT(t),eT(t,tT())?new Proxy(t,Eu):t)}function We(t){if(t instanceof IDBRequest)return rT(t);if(Iu.has(t))return Iu.get(t);let e=oT(t);return e!==t&&(Iu.set(t,e),Tu.set(e,t)),e}var ro=t=>Tu.get(t);function dn(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=We(o);return r&&o.addEventListener("upgradeneeded",c=>{r(We(o.result),c.oldVersion,c.newVersion,We(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function io(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),We(n).then(()=>{})}var aT=["get","getKey","getAll","getAllKeys","count"],cT=["put","add","delete","clear"],Au=new Map;function pg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Au.get(e))return Au.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=cT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||aT.includes(n)))return;let s=function(o,...a){return h(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Au.set(e,s),s}fg(t=>G(v({},t),{get:(e,n,r)=>pg(e,n)||t.get(e,n,r),has:(e,n)=>!!pg(e,n)||t.has(e,n)}));var bu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uT(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function uT(t){let e=t.getComponent();return e?.type==="VERSION"}var Cu="@firebase/app",gg="0.10.2";var fn=new Ut("@firebase/app"),lT="@firebase/app-compat",hT="@firebase/analytics-compat",dT="@firebase/analytics",fT="@firebase/app-check-compat",pT="@firebase/app-check",gT="@firebase/auth",mT="@firebase/auth-compat",yT="@firebase/database",vT="@firebase/database-compat",_T="@firebase/functions",IT="@firebase/functions-compat",wT="@firebase/installations",ET="@firebase/installations-compat",TT="@firebase/messaging",AT="@firebase/messaging-compat",ST="@firebase/performance",bT="@firebase/performance-compat",CT="@firebase/remote-config",RT="@firebase/remote-config-compat",DT="@firebase/storage",PT="@firebase/storage-compat",NT="@firebase/firestore",kT="@firebase/firestore-compat",OT="firebase",MT="10.11.1";var Ru="[DEFAULT]",VT={[Cu]:"fire-core",[lT]:"fire-core-compat",[dT]:"fire-analytics",[hT]:"fire-analytics-compat",[pT]:"fire-app-check",[fT]:"fire-app-check-compat",[gT]:"fire-auth",[mT]:"fire-auth-compat",[yT]:"fire-rtdb",[vT]:"fire-rtdb-compat",[_T]:"fire-fn",[IT]:"fire-fn-compat",[wT]:"fire-iid",[ET]:"fire-iid-compat",[TT]:"fire-fcm",[AT]:"fire-fcm-compat",[ST]:"fire-perf",[bT]:"fire-perf-compat",[CT]:"fire-rc",[RT]:"fire-rc-compat",[DT]:"fire-gcs",[PT]:"fire-gcs-compat",[NT]:"fire-fst",[kT]:"fire-fst-compat","fire-js":"fire-js",[OT]:"fire-js-all"};var Ii=new Map,xT=new Map,Du=new Map;function mg(t,e){try{t.container.addComponent(e)}catch(n){fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function be(t){let e=t.name;if(Du.has(e))return fn.debug(`There were multiple attempts to register component ${e}.`),!1;Du.set(e,t);for(let n of Ii.values())mg(n,t);for(let n of xT.values())mg(n,t);return!0}function st(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ke(t){return t.settings!==void 0}var LT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jt=new Oe("app","Firebase",LT);var Pu=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ie("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jt.create("app-deleted",{appName:this._name})}};var Bt=MT;function Ou(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ru,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jt.create("bad-app-name",{appName:String(i)});if(n||(n=yu()),!n)throw jt.create("no-options");let s=Ii.get(i);if(s){if(ln(n,s.options)&&ln(r,s.config))return s;throw jt.create("duplicate-app",{appName:i})}let o=new no(i);for(let c of Du.values())o.addComponent(c);let a=new Pu(n,r,o);return Ii.set(i,a),a}function yt(t=Ru){let e=Ii.get(t);if(!e&&t===Ru&&yu())return Ou();if(!e)throw jt.create("no-app",{appName:t});return e}function so(){return Array.from(Ii.values())}function L(t,e,n){var r;let i=(r=VT[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fn.warn(a.join(" "));return}be(new ie(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var FT="firebase-heartbeat-database",UT=1,wi="firebase-heartbeat-store",Su=null;function Ig(){return Su||(Su=dn(FT,UT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wi)}catch(n){console.warn(n)}}}}).catch(t=>{throw jt.create("idb-open",{originalErrorMessage:t.message})})),Su}function jT(t){return h(this,null,function*(){try{let n=(yield Ig()).transaction(wi),r=yield n.objectStore(wi).get(wg(t));return yield n.done,r}catch(e){if(e instanceof Ee)fn.warn(e.message);else{let n=jt.create("idb-get",{originalErrorMessage:e?.message});fn.warn(n.message)}}})}function yg(t,e){return h(this,null,function*(){try{let r=(yield Ig()).transaction(wi,"readwrite");yield r.objectStore(wi).put(e,wg(t)),yield r.done}catch(n){if(n instanceof Ee)fn.warn(n.message);else{let r=jt.create("idb-set",{originalErrorMessage:n?.message});fn.warn(r.message)}}})}function wg(t){return`${t.name}!${t.options.appId}`}var BT=1024,$T=30*24*60*60*1e3,Nu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ku(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return h(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=vg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=$T}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return h(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=vg(),{heartbeatsToSend:r,unsentEntries:i}=qT(this._heartbeatsCache.heartbeats),s=yi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function vg(){return new Date().toISOString().substring(0,10)}function qT(t,e=BT){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),_g(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),_g(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ku=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return h(this,null,function*(){return vi()?to().then(()=>!0).catch(()=>!1):!1})}read(){return h(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield jT(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return h(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return h(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function _g(t){return yi(JSON.stringify({version:2,heartbeats:t})).length}function zT(t){be(new ie("platform-logger",e=>new bu(e),"PRIVATE")),be(new ie("heartbeat",e=>new Nu(e),"PRIVATE")),L(Cu,gg,t),L(Cu,gg,"esm2017"),L("fire-js","")}zT("");function Fg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ug=Fg,jg=new Oe("auth","Firebase",Fg());var ho=new Ut("@firebase/auth");function GT(t,...e){ho.logLevel<=R.WARN&&ho.warn(`Auth (${Bt}): ${t}`,...e)}function ao(t,...e){ho.logLevel<=R.ERROR&&ho.error(`Auth (${Bt}): ${t}`,...e)}function at(t,...e){throw nl(t,...e)}function pn(t,...e){return nl(t,...e)}function Bg(t,e,n){let r=Object.assign(Object.assign({},Ug()),{[e]:n});return new Oe("auth","Firebase",r).create(e,{appName:t.name})}function It(t){return Bg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nl(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jg.create(t,...e)}function w(t,e,...n){if(!t)throw nl(e,...n)}function vt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw ao(e),new Error(e)}function qt(t,e){t||vt(e)}function Lu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function HT(){return Eg()==="http:"||Eg()==="https:"}function Eg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function WT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HT()||ng()||"connection"in navigator)?navigator.onLine:!0}function KT(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var gn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,qt(n>e,"Short delay should be less than long delay!"),this.isMobile=tg()||rg()}get(){return WT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function rl(t,e){qt(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var fo=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var QT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var JT=new gn(3e4,6e4);function zt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Gt(s,o,a,c){return h(this,arguments,function*(t,e,n,r,i={}){return $g(t,i,()=>h(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=_i(Object.assign({key:t.config.apiKey},l)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),fo.fetch()(qg(t,t.config.apiHost,n,d),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},u))}))})}function $g(t,e,n){return h(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},QT),e);try{let i=new Fu(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw oo(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw oo(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw oo(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw oo(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Bg(t,l,u);at(t,l)}}catch(i){if(i instanceof Ee)throw i;at(t,"network-request-failed",{message:String(i)})}})}function Di(s,o,a,c){return h(this,arguments,function*(t,e,n,r,i={}){let u=yield Gt(t,e,n,r,i);return"mfaPendingCredential"in u&&at(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function qg(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?rl(t.config,i):`${t.config.apiScheme}://${i}`}function YT(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Fu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pn(this.auth,"network-request-failed")),JT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function oo(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=pn(t,e,r);return i.customData._tokenResponse=n,i}function Tg(t){return t!==void 0&&t.enterprise!==void 0}var Uu=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return YT(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function XT(t,e){return h(this,null,function*(){return Gt(t,"GET","/v2/recaptchaConfig",zt(t,e))})}function ZT(t,e){return h(this,null,function*(){return Gt(t,"POST","/v1/accounts:delete",e)})}function zg(t,e){return h(this,null,function*(){return Gt(t,"POST","/v1/accounts:lookup",e)})}function Ei(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function il(t,e=!1){return h(this,null,function*(){let n=ge(t),r=yield n.getIdToken(e),i=sl(r);w(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ei(Mu(i.auth_time)),issuedAtTime:Ei(Mu(i.iat)),expirationTime:Ei(Mu(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Mu(t){return Number(t)*1e3}function sl(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ao("JWT malformed, contained fewer than 3 sections"),null;try{let i=gu(n);return i?JSON.parse(i):(ao("Failed to decode base64 JWT payload"),null)}catch(i){return ao("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Ag(t){let e=sl(t);return w(e,"internal-error"),w(typeof e.exp<"u","internal-error"),w(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ai(t,e,n=!1){return h(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ee&&eA(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function eA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ju=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>h(this,null,function*(){yield this.iteration()}),n)}iteration(){return h(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Si=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function po(t){return h(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Ai(t,zg(n,{idToken:r}));w(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Gg(s.providerUserInfo):[],a=tA(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Si(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function ol(t){return h(this,null,function*(){let e=ge(t);yield po(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function tA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Gg(t){return t.map(e=>{var{providerId:n}=e,r=za(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function nA(t,e){return h(this,null,function*(){let n=yield $g(t,{},()=>h(this,null,function*(){let r=_i({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=qg(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fo.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function rA(t,e){return h(this,null,function*(){return Gt(t,"POST","/v2/accounts:revokeToken",zt(t,e))})}var Ti=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){w(e.idToken,"internal-error"),w(typeof e.idToken<"u","internal-error"),w(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ag(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){w(e.length!==0,"internal-error");let n=Ag(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return h(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(w(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return h(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield nA(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(w(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(w(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(w(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return vt("not implemented")}};function $t(t,e){w(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var rr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=za(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ju(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Si(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return h(this,null,function*(){let n=yield Ai(this,this.stsTokenManager.getToken(this.auth,e));return w(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return il(this,e)}reload(){return ol(this)}_assign(e){this!==e&&(w(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return h(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield po(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return h(this,null,function*(){if(Ke(this.auth.app))return Promise.reject(It(this.auth));let e=yield this.getIdToken();return yield Ai(this,ZT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,A=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,F=(u=n.createdAt)!==null&&u!==void 0?u:void 0,le=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:Le,emailVerified:Ze,isAnonymous:Mr,providerData:tn,stsTokenManager:Vr}=n;w(Le&&Vr,e,"internal-error");let of=Ti.fromJSON(this.name,Vr);w(typeof Le=="string",e,"internal-error"),$t(d,e.name),$t(f,e.name),w(typeof Ze=="boolean",e,"internal-error"),w(typeof Mr=="boolean",e,"internal-error"),$t(m,e.name),$t(A,e.name),$t(k,e.name),$t(P,e.name),$t(F,e.name),$t(le,e.name);let xr=new t({uid:Le,auth:e,email:f,emailVerified:Ze,displayName:d,isAnonymous:Mr,photoURL:A,phoneNumber:m,tenantId:k,stsTokenManager:of,createdAt:F,lastLoginAt:le});return tn&&Array.isArray(tn)&&(xr.providerData=tn.map(ys=>Object.assign({},ys))),P&&(xr._redirectEventId=P),xr}static _fromIdTokenResponse(e,n,r=!1){return h(this,null,function*(){let i=new Ti;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield po(s),s})}static _fromGetAccountInfoResponse(e,n,r){return h(this,null,function*(){let i=n.users[0];w(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Gg(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ti;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Si(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var Sg=new Map;function _t(t){qt(t instanceof Function,"Expected a class definition");let e=Sg.get(t);return e?(qt(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Sg.set(t,e),e)}var iA=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return h(this,null,function*(){return!0})}_set(n,r){return h(this,null,function*(){this.storage[n]=r})}_get(n){return h(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return h(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Bu=iA;function co(t,e,n){return`firebase:${t}:${e}:${n}`}var go=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=co(this.userKey,i.apiKey,s),this.fullPersistenceKey=co("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return h(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?rr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return h(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return h(this,null,function*(){if(!n.length)return new t(_t(Bu),e,r);let i=(yield Promise.all(n.map(u=>h(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||_t(Bu),o=co(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=rr._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>h(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function bg(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Hg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jg(e))return"Blackberry";if(Yg(e))return"Webos";if(al(e))return"Safari";if((e.includes("chrome/")||Wg(e))&&!e.includes("edge/"))return"Chrome";if(Qg(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Hg(t=te()){return/firefox\//i.test(t)}function al(t=te()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wg(t=te()){return/crios\//i.test(t)}function Kg(t=te()){return/iemobile/i.test(t)}function Qg(t=te()){return/android/i.test(t)}function Jg(t=te()){return/blackberry/i.test(t)}function Yg(t=te()){return/webos/i.test(t)}function To(t=te()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sA(t=te()){var e;return To(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oA(){return ig()&&document.documentMode===10}function Xg(t=te()){return To(t)||Qg(t)||Yg(t)||Jg(t)||/windows phone/i.test(t)||Kg(t)}function aA(){try{return!!(window&&window!==window.top)}catch{return!1}}function Zg(t,e=[]){let n;switch(t){case"Browser":n=bg(te());break;case"Worker":n=`${bg(te())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bt}/${r}`}var $u=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return h(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function cA(n){return h(this,arguments,function*(t,e={}){return Gt(t,"GET","/v2/passwordPolicy",zt(t,e))})}var uA=6,qu=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var zu=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mo(this),this.idTokenSubscription=new mo(this),this.beforeStateQueue=new $u(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jg,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_t(n)),this._initializationPromise=this.queue(()=>h(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield go.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return h(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return h(this,null,function*(){try{let n=yield zg(this,{idToken:e}),r=yield rr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return h(this,null,function*(){var n;if(Ke(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return w(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return h(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return h(this,null,function*(){try{yield po(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=KT()}_delete(){return h(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return h(this,null,function*(){if(Ke(this.app))return Promise.reject(It(this));let n=e?ge(e):null;return n&&w(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return h(this,null,function*(){if(!this._deleted)return e&&w(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>h(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return h(this,null,function*(){return Ke(this.app)?Promise.reject(It(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Ke(this.app)?Promise.reject(It(this)):this.queue(()=>h(this,null,function*(){yield this.assertedPersistence.setPersistence(_t(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return h(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return h(this,null,function*(){let e=yield cA(this),n=new qu(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oe("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return h(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield rA(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return h(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return h(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&_t(e)||this._popupRedirectResolver;w(n,this,"argument-error"),this.redirectPersistenceManager=yield go.create(this,[_t(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return h(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>h(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return h(this,null,function*(){if(e===this.currentUser)return this.queue(()=>h(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(w(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return h(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return w(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return h(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return h(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&GT(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function yn(t){return ge(t)}var mo=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=cg(n=>this.observer=n)}get next(){return w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ao={loadJS(){return h(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lA(t){Ao=t}function em(t){return Ao.loadJS(t)}function hA(){return Ao.recaptchaEnterpriseScript}function dA(){return Ao.gapiScript}function tm(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var fA="recaptcha-enterprise",pA="NO_RECAPTCHA",Gu=class{constructor(e){this.type=fA,this.auth=yn(e)}verify(e="verify",n=!1){return h(this,null,function*(){function r(s){return h(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>h(this,null,function*(){XT(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new Uu(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;Tg(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(pA)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Tg(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=hA();c.length!==0&&(c+=a),em(c).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})})}};function Cg(t,e,n,r=!1){return h(this,null,function*(){let i=new Gu(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function Hu(t,e,n,r){return h(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Cg(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>h(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield Cg(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function cl(t,e){let n=st(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(ln(s,e??{}))return i;at(i,"already-initialized")}return n.initialize({options:e})}function gA(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(_t);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function ul(t,e,n){let r=yn(t);w(r._canInitEmulator,r,"emulator-config-failed"),w(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=nm(e),{host:o,port:a}=mA(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||yA()}function nm(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mA(t){let e=nm(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Rg(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Rg(o)}}}function Rg(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function yA(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var bi=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vt("not implemented")}_getIdTokenResponse(e){return vt("not implemented")}_linkToIdToken(e,n){return vt("not implemented")}_getReauthenticationResolver(e){return vt("not implemented")}};function vA(t,e){return h(this,null,function*(){return Gt(t,"POST","/v1/accounts:signUp",e)})}function _A(t,e){return h(this,null,function*(){return Di(t,"POST","/v1/accounts:signInWithPassword",zt(t,e))})}function IA(t,e){return h(this,null,function*(){return Di(t,"POST","/v1/accounts:signInWithEmailLink",zt(t,e))})}function wA(t,e){return h(this,null,function*(){return Di(t,"POST","/v1/accounts:signInWithEmailLink",zt(t,e))})}var Ci=class t extends bi{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return h(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hu(e,n,"signInWithPassword",_A);case"emailLink":return IA(e,{email:this._email,oobCode:this._password});default:at(e,"internal-error")}})}_linkToIdToken(e,n){return h(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hu(e,r,"signUpPassword",vA);case"emailLink":return wA(e,{idToken:n,email:this._email,oobCode:this._password});default:at(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Vu(t,e){return h(this,null,function*(){return Di(t,"POST","/v1/accounts:signInWithIdp",zt(t,e))})}function EA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TA(t){let e=tr(nr(t)).link,n=e?tr(nr(e)).deep_link_id:null,r=tr(nr(t)).deep_link_id;return(r?tr(nr(r)).link:null)||r||n||e||t}var yo=class t{constructor(e){var n,r,i,s,o,a;let c=tr(nr(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,d=EA((i=c.mode)!==null&&i!==void 0?i:null);w(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=TA(e);try{return new t(n)}catch{return null}}};var rm=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Ci._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=yo.parseLink(r);return w(i,"argument-error"),Ci._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),vo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Wu=class extends vo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function AA(t,e){return h(this,null,function*(){return Di(t,"POST","/v1/accounts:signUp",zt(t,e))})}var ir=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return h(this,null,function*(){let s=yield rr._fromIdTokenResponse(e,r,i),o=Dg(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return h(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Dg(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Dg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Ku=class t extends Ee{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function im(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ku._fromErrorAndOperation(t,s,e,r):s})}function SA(t,e,n=!1){return h(this,null,function*(){let r=yield Ai(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ir._forOperation(t,"link",r)})}function bA(t,e,n=!1){return h(this,null,function*(){let{auth:r}=t;if(Ke(r.app))return Promise.reject(It(r));let i="reauthenticate";try{let s=yield Ai(t,im(r,i,e,t),n);w(s.idToken,r,"internal-error");let o=sl(s.idToken);w(o,r,"internal-error");let{sub:a}=o;return w(t.uid===a,r,"user-mismatch"),ir._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&at(r,"user-mismatch"),s}})}function sm(t,e,n=!1){return h(this,null,function*(){if(Ke(t.app))return Promise.reject(It(t));let r="signIn",i=yield im(t,r,e),s=yield ir._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function ll(t,e){return h(this,null,function*(){return sm(yn(t),e)})}function om(t){return h(this,null,function*(){let e=yn(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function hl(t,e,n){return h(this,null,function*(){if(Ke(t.app))return Promise.reject(It(t));let r=yn(t),o=yield Hu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AA).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&om(t),c}),a=yield ir._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function vn(t,e,n){return Ke(t.app)?Promise.reject(It(t)):ll(ge(t),rm.credential(e,n)).catch(r=>h(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&om(t),r}))}function dl(t,e,n,r){return ge(t).onIdTokenChanged(e,n,r)}function fl(t,e,n){return ge(t).beforeAuthStateChanged(e,n)}var _o="__sak";var Io=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_o,"1"),this.storage.removeItem(_o),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function CA(){let t=te();return al(t)||To(t)}var RA=1e3,DA=10,PA=(()=>{class t extends Io{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=CA()&&aA(),this.fallbackToPolling=Xg(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);oA()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,DA):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},RA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return h(this,null,function*(){yield Nt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return h(this,null,function*(){let r=yield Nt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return h(this,null,function*(){yield Nt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),am=PA;var NA=(()=>{class t extends Io{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),pl=NA;function kA(t){return Promise.all(t.map(e=>h(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var OA=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return h(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(l=>h(this,null,function*(){return l(r.origin,o)})),u=yield kA(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function cm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Qu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return h(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=cm("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ot(){return window}function MA(t){ot().location.href=t}function um(){return typeof ot().WorkerGlobalScope<"u"&&typeof ot().importScripts=="function"}function VA(){return h(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function xA(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function LA(){return um()?self:null}var lm="firebaseLocalStorageDb",FA=1,wo="firebaseLocalStorage",hm="fbase_key",mn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function So(t,e){return t.transaction([wo],e?"readwrite":"readonly").objectStore(wo)}function UA(){let t=indexedDB.deleteDatabase(lm);return new mn(t).toPromise()}function Ju(){let t=indexedDB.open(lm,FA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(wo,{keyPath:hm})}catch(i){n(i)}}),t.addEventListener("success",()=>h(this,null,function*(){let r=t.result;r.objectStoreNames.contains(wo)?e(r):(r.close(),yield UA(),e(yield Ju()))}))})}function Pg(t,e,n){return h(this,null,function*(){let r=So(t,!0).put({[hm]:e,value:n});return new mn(r).toPromise()})}function jA(t,e){return h(this,null,function*(){let n=So(t,!1).get(e),r=yield new mn(n).toPromise();return r===void 0?null:r.value})}function Ng(t,e){let n=So(t,!0).delete(e);return new mn(n).toPromise()}var BA=800,$A=3,qA=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return h(this,null,function*(){return this.db?this.db:(this.db=yield Ju(),this.db)})}_withRetries(n){return h(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>$A)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return h(this,null,function*(){return um()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return h(this,null,function*(){this.receiver=OA._getInstance(LA()),this.receiver._subscribe("keyChanged",(n,r)=>h(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>h(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return h(this,null,function*(){var n,r;if(this.activeServiceWorker=yield VA(),!this.activeServiceWorker)return;this.sender=new Qu(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return h(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||xA()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return h(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Ju();return yield Pg(n,_o,"1"),yield Ng(n,_o),!0}catch{}return!1})}_withPendingWrite(n){return h(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return h(this,null,function*(){return this._withPendingWrite(()=>h(this,null,function*(){return yield this._withRetries(i=>Pg(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return h(this,null,function*(){let r=yield this._withRetries(i=>jA(i,n));return this.localCache[n]=r,r})}_remove(n){return h(this,null,function*(){return this._withPendingWrite(()=>h(this,null,function*(){return yield this._withRetries(r=>Ng(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return h(this,null,function*(){let n=yield this._withRetries(s=>{let o=So(s,!1).getAll();return new mn(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>h(this,null,function*(){return this._poll()}),BA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),dm=qA;var GN=tm("rcb"),HN=new gn(3e4,6e4);function zA(t,e){return e?_t(e):(w(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ri=class extends bi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vu(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function GA(t){return sm(t.auth,new Ri(t),t.bypassAuthState)}function HA(t){let{auth:e,user:n}=t;return w(n,e,"internal-error"),bA(n,new Ri(t),t.bypassAuthState)}function WA(t){return h(this,null,function*(){let{auth:e,user:n}=t;return w(n,e,"internal-error"),SA(n,new Ri(t),t.bypassAuthState)})}var Yu=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>h(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return h(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GA;case"linkViaPopup":case"linkViaRedirect":return WA;case"reauthViaPopup":case"reauthViaRedirect":return HA;default:at(this.auth,"internal-error")}}resolve(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var WN=new gn(2e3,1e4);var KA="pendingRedirect",uo=new Map,Xu=class t extends Yu{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return h(this,null,function*(){let e=uo.get(this.auth._key());if(!e){try{let r=(yield QA(this.resolver,this.auth))?yield Nt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}uo.set(this.auth._key(),e)}return this.bypassAuthState||uo.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return h(this,null,function*(){if(e.type==="signInViaRedirect")return Nt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Nt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return h(this,null,function*(){})}cleanUp(){}};function QA(t,e){return h(this,null,function*(){let n=XA(e),r=YA(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function JA(t,e){uo.set(t._key(),e)}function YA(t){return _t(t._redirectPersistence)}function XA(t){return co(KA,t.config.apiKey,t.name)}function ZA(t,e,n=!1){return h(this,null,function*(){if(Ke(t.app))return Promise.reject(It(t));let r=yn(t),i=zA(r,e),o=yield new Xu(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var eS=10*60*1e3,Zu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fm(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eS&&this.cachedEventUids.clear(),this.cachedEventUids.has(kg(e))}saveEventToCache(e){this.cachedEventUids.add(kg(e)),this.lastProcessedEventTime=Date.now()}};function kg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fm({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function tS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fm(t);default:return!1}}function nS(n){return h(this,arguments,function*(t,e={}){return Gt(t,"GET","/v1/projects",e)})}var rS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iS=/^https?/;function sS(t){return h(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield nS(t);for(let n of e)try{if(oS(n))return}catch{}at(t,"unauthorized-domain")})}function oS(t){let e=Lu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iS.test(n))return!1;if(rS.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var aS=new gn(3e4,6e4);function Og(){let t=ot().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cS(t){return new Promise((e,n)=>{var r,i,s;function o(){Og(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Og(),n(pn(t,"network-request-failed"))},timeout:aS.get()})}if(!((i=(r=ot().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ot().gapi)===null||s===void 0)&&s.load)o();else{let a=tm("iframefcb");return ot()[a]=()=>{gapi.load?o():n(pn(t,"network-request-failed"))},em(`${dA()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw lo=null,e})}var lo=null;function uS(t){return lo=lo||cS(t),lo}var lS=new gn(5e3,15e3),hS="__/auth/iframe",dS="emulator/auth/iframe",fS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gS(t){let e=t.config;w(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?rl(e,dS):`https://${t.config.authDomain}/${hS}`,r={apiKey:e.apiKey,appName:t.name,v:Bt},i=pS.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_i(r).slice(1)}`}function mS(t){return h(this,null,function*(){let e=yield uS(t),n=ot().gapi;return w(n,t,"internal-error"),e.open({where:document.body,url:gS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fS,dontclear:!0},r=>new Promise((i,s)=>h(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=pn(t,"network-request-failed"),a=ot().setTimeout(()=>{s(o)},lS.get());function c(){ot().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var yS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vS=500,_S=600,IS="_blank",wS="http://localhost",Eo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ES(t,e,n,r=vS,i=_S){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},yS),{width:r.toString(),height:i.toString(),top:s,left:o}),u=te().toLowerCase();n&&(a=Wg(u)?IS:n),Hg(u)&&(e=e||wS,c.scrollbars="yes");let l=Object.entries(c).reduce((f,[m,A])=>`${f}${m}=${A},`,"");if(sA(u)&&a!=="_self")return TS(e||"",a),new Eo(null);let d=window.open(e||"",a,l);w(d,t,"popup-blocked");try{d.focus()}catch{}return new Eo(d)}function TS(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var AS="__/auth/handler",SS="emulator/auth/handler",bS=encodeURIComponent("fac");function Mg(t,e,n,r,i,s){return h(this,null,function*(){w(t.config.authDomain,t,"auth-domain-config-required"),w(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bt,eventId:i};if(e instanceof vo){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ag(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(s||{}))o[l]=d}if(e instanceof Wu){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield t._getAppCheckToken(),u=c?`#${bS}=${encodeURIComponent(c)}`:"";return`${CS(t)}?${_i(a).slice(1)}${u}`})}function CS({config:t}){return t.emulator?rl(t,SS):`https://${t.authDomain}/${AS}`}var xu="webStorageSupport",el=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pl,this._completeRedirectFn=ZA,this._overrideRedirectResult=JA}_openPopup(e,n,r,i){return h(this,null,function*(){var s;qt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Mg(e,n,r,Lu(),i);return ES(e,o,cm())})}_openRedirect(e,n,r,i){return h(this,null,function*(){yield this._originValidation(e);let s=yield Mg(e,n,r,Lu(),i);return MA(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return h(this,null,function*(){let n=yield mS(e),r=new Zu(e);return n.register("authEvent",i=>(w(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xu,{type:xu},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[xu];o!==void 0&&n(!!o),at(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Xg()||al()||To()}},pm=el;var Vg="@firebase/auth",xg="1.7.2";var tl=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return h(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function RS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DS(t){be(new ie("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;w(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zg(t)},u=new zu(r,i,s,c);return gA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),be(new ie("auth-internal",e=>{let n=yn(e.getProvider("auth").getImmediate());return(r=>new tl(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),L(Vg,xg,RS(t)),L(Vg,xg,"esm2017")}var PS=5*60,NS=vu("authIdTokenMaxAge")||PS,Lg=null,kS=t=>e=>h(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>NS)return;let i=n?.token;Lg!==i&&(Lg=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function gl(t=yt()){let e=st(t,"auth");if(e.isInitialized())return e.getImmediate();let n=cl(t,{popupRedirectResolver:pm,persistence:[dm,am,pl]}),r=vu("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=kS(s.toString());fl(n,o,()=>o(n.currentUser)),dl(n,a=>o(a))}}let i=mu("auth");return i&&ul(n,`http://${i}`),n}function OS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lA({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=pn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",OS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DS("Browser");var Ab=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Je={},y,Ll=Ll||{},E=Ab||self;function Uo(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function qi(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Sb(t){return Object.prototype.hasOwnProperty.call(t,ml)&&t[ml]||(t[ml]=++bb)}var ml="closure_uid_"+(1e9*Math.random()>>>0),bb=0;function Cb(t,e,n){return t.call.apply(t.bind,arguments)}function Rb(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function me(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?me=Cb:me=Rb,me.apply(null,arguments)}function bo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function oe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Ht(){this.s=this.s,this.o=this.o}var Db=0;Ht.prototype.s=!1;Ht.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Db!=0)&&Sb(this)};Ht.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Cm=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Fl(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function gm(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Uo(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function ye(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Pb=function(){if(!E.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};E.addEventListener("test",n,e),E.removeEventListener("test",n,e)}catch{}return t}();function Vi(t){return/^[\s\xa0]*$/.test(t)}function jo(){var t=E.navigator;return t&&(t=t.userAgent)?t:""}function ct(t){return jo().indexOf(t)!=-1}function Ul(t){return Ul[" "](t),t}Ul[" "]=function(){};function Nb(t,e){var n=_0;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var kb=ct("Opera"),cr=ct("Trident")||ct("MSIE"),Rm=ct("Edge"),wl=Rm||cr,Dm=ct("Gecko")&&!(jo().toLowerCase().indexOf("webkit")!=-1&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Ob=jo().toLowerCase().indexOf("webkit")!=-1&&!ct("Edge");function Pm(){var t=E.document;return t?t.documentMode:void 0}var El;e:{if(Co="",Ro=function(){var t=jo();if(Dm)return/rv:([^\);]+)(\)|;)/.exec(t);if(Rm)return/Edge\/([\d\.]+)/.exec(t);if(cr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Ob)return/WebKit\/(\S+)/.exec(t);if(kb)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Ro&&(Co=Ro?Ro[1]:""),cr&&(Do=Pm(),Do!=null&&Do>parseFloat(Co))){El=String(Do);break e}El=Co}var Co,Ro,Do,Tl;E.document&&cr?(yl=Pm(),Tl=yl||parseInt(El,10)||void 0):Tl=void 0;var yl,Mb=Tl;function xi(t,e){if(ye.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Dm){e:{try{Ul(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Vb[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&xi.$.h.call(this)}}oe(xi,ye);var Vb={2:"touch",3:"pen",4:"mouse"};xi.prototype.h=function(){xi.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var zi="closure_listenable_"+(1e6*Math.random()|0),xb=0;function Lb(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++xb,this.fa=this.ia=!1}function Bo(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function jl(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function Fb(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function Nm(t){let e={};for(let n in t)e[n]=t[n];return e}var mm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function km(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<mm.length;s++)n=mm[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function $o(t){this.src=t,this.g={},this.h=0}$o.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Sl(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Lb(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Al(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Cm(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Bo(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Sl(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Bl="closure_lm_"+(1e6*Math.random()|0),vl={};function Om(t,e,n,r,i){if(r&&r.once)return Vm(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Om(t,e[s],n,r,i);return null}return n=zl(n),t&&t[zi]?t.O(e,n,qi(r)?!!r.capture:!!r,i):Mm(t,e,n,!1,r,i)}function Mm(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=qi(i)?!!i.capture:!!i,a=ql(t);if(a||(t[Bl]=a=new $o(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=Ub(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Pb||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Lm(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Ub(){function t(n){return e.call(t.src,t.listener,n)}let e=jb;return t}function Vm(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Vm(t,e[s],n,r,i);return null}return n=zl(n),t&&t[zi]?t.P(e,n,qi(r)?!!r.capture:!!r,i):Mm(t,e,n,!0,r,i)}function xm(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)xm(t,e[s],n,r,i);else r=qi(r)?!!r.capture:!!r,n=zl(n),t&&t[zi]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Sl(s,n,r,i),-1<n&&(Bo(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=ql(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Sl(e,n,r,i)),(n=-1<t?e[t]:null)&&$l(n))}function $l(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[zi])Al(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Lm(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ql(e))?(Al(n,t),n.h==0&&(n.src=null,e[Bl]=null)):Bo(t)}}}function Lm(t){return t in vl?vl[t]:vl[t]="on"+t}function jb(t,e){if(t.fa)t=!0;else{e=new xi(e,this);var n=t.listener,r=t.la||t.src;t.ia&&$l(t),t=n.call(r,e)}return t}function ql(t){return t=t[Bl],t instanceof $o?t:null}var _l="__closure_events_fn_"+(1e9*Math.random()>>>0);function zl(t){return typeof t=="function"?t:(t[_l]||(t[_l]=function(e){return t.handleEvent(e)}),t[_l])}function se(){Ht.call(this),this.i=new $o(this),this.S=this,this.J=null}oe(se,Ht);se.prototype[zi]=!0;se.prototype.removeEventListener=function(t,e,n,r){xm(this,t,e,n,r)};function pe(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new ye(e,t);else if(e instanceof ye)e.target=e.target||t;else{var i=e;e=new ye(r,t),km(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Po(o,r,!0,e)&&i}if(o=e.g=t,i=Po(o,r,!0,e)&&i,i=Po(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Po(o,r,!1,e)&&i}se.prototype.N=function(){if(se.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Bo(n[r]);delete t.g[e],t.h--}}this.J=null};se.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};se.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Po(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Al(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Gl=E.JSON.stringify,bl=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Bb(){var t=Hl;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Cl=class{constructor(){this.h=this.g=null}add(e,n){let r=Fm.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},Fm=new bl(()=>new Rl,t=>t.reset()),Rl=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function $b(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function qb(t){E.setTimeout(()=>{throw t},0)}var Li,Fi=!1,Hl=new Cl,Um=()=>{let t=E.Promise.resolve(void 0);Li=()=>{t.then(zb)}},zb=()=>{for(var t;t=Bb();){try{t.h.call(t.g)}catch(n){qb(n)}var e=Fm;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Fi=!1};function qo(t,e){se.call(this),this.h=t||1,this.g=e||E,this.j=me(this.qb,this),this.l=Date.now()}oe(qo,se);y=qo.prototype;y.ga=!1;y.T=null;y.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pe(this,"tick"),this.ga&&(Wl(this),this.start()))}};y.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Wl(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}y.N=function(){qo.$.N.call(this),Wl(this),delete this.g};function Kl(t,e,n){if(typeof t=="function")n&&(t=me(t,n));else if(t&&typeof t.handleEvent=="function")t=me(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:E.setTimeout(t,e||0)}function jm(t){t.g=Kl(()=>{t.g=null,t.i&&(t.i=!1,jm(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Dl=class extends Ht{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jm(this)}N(){super.N(),this.g&&(E.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ui(t){Ht.call(this),this.h=t,this.g={}}oe(Ui,Ht);var ym=[];function Bm(t,e,n,r){Array.isArray(n)||(n&&(ym[0]=n.toString()),n=ym);for(var i=0;i<n.length;i++){var s=Om(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function $m(t){jl(t.g,function(e,n){this.g.hasOwnProperty(n)&&$l(e)},t),t.g={}}Ui.prototype.N=function(){Ui.$.N.call(this),$m(this)};Ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function zo(){this.g=!0}zo.prototype.Ea=function(){this.g=!1};function Gb(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Hb(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function or(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Kb(t,n)+(r?" "+r:"")})}function Wb(t,e){t.info(function(){return"TIMEOUT: "+e})}zo.prototype.info=function(){};function Kb(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Gl(n)}catch{return e}}var En={},vm=null;function Go(){return vm=vm||new se}En.Ta="serverreachability";function qm(t){ye.call(this,En.Ta,t)}oe(qm,ye);function ji(t){let e=Go();pe(e,new qm(e))}En.STAT_EVENT="statevent";function zm(t,e){ye.call(this,En.STAT_EVENT,t),this.stat=e}oe(zm,ye);function Te(t){let e=Go();pe(e,new zm(e,t))}En.Ua="timingevent";function Gm(t,e){ye.call(this,En.Ua,t),this.size=e}oe(Gm,ye);function Gi(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return E.setTimeout(function(){t()},e)}var Ho={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Hm={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ql(){}Ql.prototype.h=null;function _m(t){return t.h||(t.h=t.i())}function Wm(){}var Hi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Jl(){ye.call(this,"d")}oe(Jl,ye);function Yl(){ye.call(this,"c")}oe(Yl,ye);var Pl;function Wo(){}oe(Wo,Ql);Wo.prototype.g=function(){return new XMLHttpRequest};Wo.prototype.i=function(){return{}};Pl=new Wo;function Wi(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ui(this),this.P=Qb,t=wl?125:void 0,this.V=new qo(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Km}function Km(){this.i=null,this.g="",this.h=!1}var Qb=45e3,Qm={},Nl={};y=Wi.prototype;y.setTimeout=function(t){this.P=t};function kl(t,e,n){t.L=1,t.A=Qo(Et(e)),t.u=n,t.S=!0,Jm(t,null)}function Jm(t,e){t.G=Date.now(),Ki(t),t.B=Et(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),iy(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Km,t.g=Sy(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Dl(me(t.Pa,t,t.g),t.O)),Bm(t.U,t.g,"readystatechange",t.nb),e=t.I?Nm(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ji(),Gb(t.j,t.v,t.B,t.m,t.W,t.u)}y.nb=function(t){t=t.target;let e=this.M;e&&ut(t)==3?e.l():this.Pa(t)};y.Pa=function(t){try{if(t==this.g)e:{let l=ut(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||wl||this.g&&(this.h.h||this.g.ja()||Tm(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?ji(3):ji(2)),Ko(this);var n=this.g.da();this.ca=n;t:if(Ym(this)){var r=Tm(this.g);t="";var i=r.length,s=ut(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),Mi(this);var o="";break t}this.h.i=new E.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Hb(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vi(a)){var u=a;break t}}u=null}if(n=u)or(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ol(this,n);else{this.i=!1,this.s=3,Te(12),_n(this),Mi(this);break e}}this.S?(Xm(this,l,o),wl&&this.i&&l==3&&(Bm(this.U,this.V,"tick",this.mb),this.V.start())):(or(this.j,this.m,o,null),Ol(this,o)),l==4&&_n(this),this.i&&!this.J&&(l==4?wy(this.l,this):(this.i=!1,Ki(this)))}else m0(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),_n(this),Mi(this)}}}catch{}finally{}};function Ym(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Xm(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=Jb(t,n),i==Nl){e==4&&(t.s=4,Te(14),r=!1),or(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Qm){t.s=4,Te(15),or(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else or(t.j,t.m,i,null),Ol(t,i);Ym(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Te(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),rh(e),e.M=!0,Te(11))):(or(t.j,t.m,n,"[Invalid Chunked Response]"),_n(t),Mi(t))}y.mb=function(){if(this.g){var t=ut(this.g),e=this.g.ja();this.o<e.length&&(Ko(this),Xm(this,t,e),this.i&&t!=4&&Ki(this))}};function Jb(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Nl:(n=Number(e.substring(n,r)),isNaN(n)?Qm:(r+=1,r+n>e.length?Nl:(e=e.slice(r,r+n),t.o=r+n,e)))}y.cancel=function(){this.J=!0,_n(this)};function Ki(t){t.Y=Date.now()+t.P,Zm(t,t.P)}function Zm(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Gi(me(t.lb,t),e)}function Ko(t){t.C&&(E.clearTimeout(t.C),t.C=null)}y.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(Wb(this.j,this.B),this.L!=2&&(ji(),Te(17)),_n(this),this.s=2,Mi(this)):Zm(this,this.Y-t)};function Mi(t){t.l.H==0||t.J||wy(t.l,t)}function _n(t){Ko(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Wl(t.V),$m(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Ol(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Ml(n.i,t))){if(!t.K&&Ml(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Vo(n),Xo(n);else break e;nh(n),Te(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Gi(me(n.ib,n),6e3));if(1>=ay(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else In(n,11)}else if((t.K||n.g==t)&&Vo(n),!Vi(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let m=t.g;if(m){let A=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(A){var s=r.i;s.g||A.indexOf("spdy")==-1&&A.indexOf("quic")==-1&&A.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Xl(s,s.h),s.h=null))}if(r.F){let k=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;k&&(r.Da=k,$(r.I,r.F,k))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Ay(r,r.J?r.pa:null,r.Y),o.K){cy(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Ko(a),Ki(a)),r.g=o}else _y(r);0<n.j.length&&Zo(n)}else u[0]!="stop"&&u[0]!="close"||In(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?In(n,7):th(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}ji(4)}catch{}}function Yb(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Uo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Xb(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Uo(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function ey(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Uo(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Xb(t),r=Yb(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var ty=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zb(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function wn(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof wn){this.h=t.h,Oo(this,t.j),this.s=t.s,this.g=t.g,Mo(this,t.m),this.l=t.l;var e=t.i,n=new Bi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Im(this,n),this.o=t.o}else t&&(e=String(t).match(ty))?(this.h=!1,Oo(this,e[1]||"",!0),this.s=ki(e[2]||""),this.g=ki(e[3]||"",!0),Mo(this,e[4]),this.l=ki(e[5]||"",!0),Im(this,e[6]||"",!0),this.o=ki(e[7]||"")):(this.h=!1,this.i=new Bi(null,this.h))}wn.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Oi(e,wm,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Oi(e,wm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Oi(n,n.charAt(0)=="/"?n0:t0,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Oi(n,i0)),t.join("")};function Et(t){return new wn(t)}function Oo(t,e,n){t.j=n?ki(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Mo(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Im(t,e,n){e instanceof Bi?(t.i=e,s0(t.i,t.h)):(n||(e=Oi(e,r0)),t.i=new Bi(e,t.h))}function $(t,e,n){t.i.set(e,n)}function Qo(t){return $(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ki(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Oi(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,e0),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function e0(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var wm=/[#\/\?@]/g,t0=/[#\?:]/g,n0=/[#\?]/g,r0=/[#\?@]/g,i0=/#/g;function Bi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Wt(t){t.g||(t.g=new Map,t.h=0,t.i&&Zb(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}y=Bi.prototype;y.add=function(t,e){Wt(this),this.i=null,t=ur(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function ny(t,e){Wt(t),e=ur(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function ry(t,e){return Wt(t),e=ur(t,e),t.g.has(e)}y.forEach=function(t,e){Wt(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};y.ta=function(){Wt(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};y.Z=function(t){Wt(this);let e=[];if(typeof t=="string")ry(this,t)&&(e=e.concat(this.g.get(ur(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};y.set=function(t,e){return Wt(this),this.i=null,t=ur(this,t),ry(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};y.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function iy(t,e,n){ny(t,e),0<n.length&&(t.i=null,t.g.set(ur(t,e),Fl(n)),t.h+=n.length)}y.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ur(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function s0(t,e){e&&!t.j&&(Wt(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(ny(this,r),iy(this,i,n))},t)),t.j=e}var o0=class{constructor(t,e){this.g=t,this.map=e}};function sy(t){this.l=t||a0,E.PerformanceNavigationTiming?(t=E.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(E.g&&E.g.Ka&&E.g.Ka()&&E.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var a0=10;function oy(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ay(t){return t.h?1:t.g?t.g.size:0}function Ml(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Xl(t,e){t.g?t.g.add(e):t.h=e}function cy(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}sy.prototype.cancel=function(){if(this.i=uy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function uy(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Fl(t.i)}var c0=class{stringify(t){return E.JSON.stringify(t,void 0)}parse(t){return E.JSON.parse(t,void 0)}};function u0(){this.g=new c0}function l0(t,e,n){let r=n||"";try{ey(t,function(i,s){let o=i;qi(i)&&(o=Gl(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function h0(t,e){let n=new zo;if(E.Image){let r=new Image;r.onload=bo(No,n,r,"TestLoadImage: loaded",!0,e),r.onerror=bo(No,n,r,"TestLoadImage: error",!1,e),r.onabort=bo(No,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=bo(No,n,r,"TestLoadImage: timeout",!1,e),E.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function No(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Qi(t){this.l=t.ec||null,this.j=t.ob||!1}oe(Qi,Ql);Qi.prototype.g=function(){return new Jo(this.l,this.j)};Qi.prototype.i=function(t){return function(){return t}}({});function Jo(t,e){se.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Zl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oe(Jo,se);var Zl=0;y=Jo.prototype;y.open=function(t,e){if(this.readyState!=Zl)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,$i(this)};y.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||E).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=Zl};y.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof E.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ly(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ly(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}y.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ji(this):$i(this),this.readyState==3&&ly(this)}};y.Za=function(t){this.g&&(this.response=this.responseText=t,Ji(this))};y.Ya=function(t){this.g&&(this.response=t,Ji(this))};y.ka=function(){this.g&&Ji(this)};function Ji(t){t.readyState=4,t.l=null,t.j=null,t.A=null,$i(t)}y.setRequestHeader=function(t,e){this.v.append(t,e)};y.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};y.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function $i(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var d0=E.JSON.parse;function H(t){se.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hy,this.L=this.M=!1}oe(H,se);var hy="",f0=/^https?$/i,p0=["POST","PUT"];y=H.prototype;y.Oa=function(t){this.M=t};y.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Pl.g(),this.C=this.u?_m(this.u):_m(Pl),this.g.onreadystatechange=me(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){Em(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=E.FormData&&t instanceof E.FormData,!(0<=Cm(p0,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{py(this),0<this.B&&((this.L=g0(this.g))?(this.g.timeout=this.B,this.g.ontimeout=me(this.ua,this)):this.A=Kl(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Em(this,s)}};function g0(t){return cr&&typeof t.timeout=="number"&&t.ontimeout!==void 0}y.ua=function(){typeof Ll<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pe(this,"timeout"),this.abort(8))};function Em(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,dy(t),Yo(t)}function dy(t){t.F||(t.F=!0,pe(t,"complete"),pe(t,"error"))}y.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pe(this,"complete"),pe(this,"abort"),Yo(this))};y.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yo(this,!0)),H.$.N.call(this)};y.La=function(){this.s||(this.G||this.v||this.l?fy(this):this.kb())};y.kb=function(){fy(this)};function fy(t){if(t.h&&typeof Ll<"u"&&(!t.C[1]||ut(t)!=4||t.da()!=2)){if(t.v&&ut(t)==4)Kl(t.La,0,t);else if(pe(t,"readystatechange"),ut(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(ty)[1]||null;!i&&E.self&&E.self.location&&(i=E.self.location.protocol.slice(0,-1)),r=!f0.test(i?i.toLowerCase():"")}n=r}if(n)pe(t,"complete"),pe(t,"success");else{t.m=6;try{var s=2<ut(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",dy(t)}}finally{Yo(t)}}}}function Yo(t,e){if(t.g){py(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pe(t,"ready");try{n.onreadystatechange=r}catch{}}}function py(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(E.clearTimeout(t.A),t.A=null)}y.isActive=function(){return!!this.g};function ut(t){return t.g?t.g.readyState:0}y.da=function(){try{return 2<ut(this)?this.g.status:-1}catch{return-1}};y.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};y.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),d0(e)}};function Tm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case hy:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function m0(t){let e={};t=(t.g&&2<=ut(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Vi(t[r]))continue;var n=$b(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}Fb(e,function(r){return r.join(", ")})}y.Ia=function(){return this.m};y.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function gy(t){let e="";return jl(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function eh(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=gy(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):$(t,e,n))}function Pi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function my(t){this.Ga=0,this.j=[],this.l=new zo,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Pi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Pi("baseRetryDelayMs",5e3,t),this.hb=Pi("retryDelaySeedMs",1e4,t),this.eb=Pi("forwardChannelMaxRetries",2,t),this.xa=Pi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new sy(t&&t.concurrentRequestLimit),this.Ja=new u0,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}y=my.prototype;y.ra=8;y.H=1;function th(t){if(yy(t),t.H==3){var e=t.W++,n=Et(t.I);if($(n,"SID",t.K),$(n,"RID",e),$(n,"TYPE","terminate"),Yi(t,n),e=new Wi(t,t.l,e),e.L=2,e.A=Qo(Et(n)),n=!1,E.navigator&&E.navigator.sendBeacon)try{n=E.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&E.Image&&(new Image().src=e.A,n=!0),n||(e.g=Sy(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Ki(e)}Ty(t)}function Xo(t){t.g&&(rh(t),t.g.cancel(),t.g=null)}function yy(t){Xo(t),t.u&&(E.clearTimeout(t.u),t.u=null),Vo(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&E.clearTimeout(t.m),t.m=null)}function Zo(t){if(!oy(t.i)&&!t.m){t.m=!0;var e=t.Na;Li||Um(),Fi||(Li(),Fi=!0),Hl.add(e,t),t.C=0}}function y0(t,e){return ay(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Gi(me(t.Na,t,e),Ey(t,t.C)),t.C++,!0)}y.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Wi(this,this.l,t),s=this.s;if(this.U&&(s?(s=Nm(s),km(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=vy(this,i,e),n=Et(this.I),$(n,"RID",t),$(n,"CVER",22),this.F&&$(n,"X-HTTP-Session-Id",this.F),Yi(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(gy(s)))+"&"+e:this.o&&eh(n,this.o,s)),Xl(this.i,i),this.bb&&$(n,"TYPE","init"),this.P?($(n,"$req",e),$(n,"SID","null"),i.aa=!0,kl(i,n,null)):kl(i,n,e),this.H=2}}else this.H==3&&(t?Am(this,t):this.j.length==0||oy(this.i)||Am(this))};function Am(t,e){var n;e?n=e.m:n=t.W++;let r=Et(t.I);$(r,"SID",t.K),$(r,"RID",n),$(r,"AID",t.V),Yi(t,r),t.o&&t.s&&eh(r,t.o,t.s),n=new Wi(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=vy(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Xl(t.i,n),kl(n,r,e)}function Yi(t,e){t.na&&jl(t.na,function(n,r){$(e,r,n)}),t.h&&ey({},function(n,r){$(e,r,n)})}function vy(t,e,n){n=Math.min(t.j.length,n);var r=t.h?me(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{l0(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function _y(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Li||Um(),Fi||(Li(),Fi=!0),Hl.add(e,t),t.A=0}}function nh(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Gi(me(t.Ma,t),Ey(t,t.A)),t.A++,!0)}y.Ma=function(){if(this.u=null,Iy(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Gi(me(this.jb,this),t)}};y.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Te(10),Xo(this),Iy(this))};function rh(t){t.B!=null&&(E.clearTimeout(t.B),t.B=null)}function Iy(t){t.g=new Wi(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Et(t.wa);$(e,"RID","rpc"),$(e,"SID",t.K),$(e,"AID",t.V),$(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&$(e,"TO",t.qa),$(e,"TYPE","xmlhttp"),Yi(t,e),t.o&&t.s&&eh(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Qo(Et(e)),n.u=null,n.S=!0,Jm(n,t)}y.ib=function(){this.v!=null&&(this.v=null,Xo(this),nh(this),Te(19))};function Vo(t){t.v!=null&&(E.clearTimeout(t.v),t.v=null)}function wy(t,e){var n=null;if(t.g==e){Vo(t),rh(t),t.g=null;var r=2}else if(Ml(t.i,e))n=e.F,cy(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Go(),pe(r,new Gm(r,n)),Zo(t)}else _y(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&y0(t,e)||r==2&&nh(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:In(t,5);break;case 4:In(t,10);break;case 3:In(t,6);break;default:In(t,2)}}}function Ey(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function In(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=me(t.pb,t);n||(n=new wn("//www.google.com/images/cleardot.gif"),E.location&&E.location.protocol=="http"||Oo(n,"https"),Qo(n)),h0(n.toString(),r)}else Te(2);t.H=0,t.h&&t.h.za(e),Ty(t),yy(t)}y.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Te(2)):(this.l.info("Failed to ping google.com"),Te(1))};function Ty(t){if(t.H=0,t.ma=[],t.h){let e=uy(t.i);(e.length!=0||t.j.length!=0)&&(gm(t.ma,e),gm(t.ma,t.j),t.i.i.length=0,Fl(t.j),t.j.length=0),t.h.ya()}}function Ay(t,e,n){var r=n instanceof wn?Et(n):new wn(n);if(r.g!="")e&&(r.g=e+"."+r.g),Mo(r,r.m);else{var i=E.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new wn(null);r&&Oo(s,r),e&&(s.g=e),i&&Mo(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&$(r,n,e),$(r,"VER",t.ra),Yi(t,r),r}function Sy(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new H(new Qi({ob:n})):new H(t.va),e.Oa(t.J),e}y.isActive=function(){return!!this.h&&this.h.isActive(this)};function by(){}y=by.prototype;y.Ba=function(){};y.Aa=function(){};y.za=function(){};y.ya=function(){};y.isActive=function(){return!0};y.Va=function(){};function xo(){if(cr&&!(10<=Number(Mb)))throw Error("Environmental error: no available transport.")}xo.prototype.g=function(t,e){return new Me(t,e)};function Me(t,e){se.call(this),this.g=new my(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Vi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vi(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new lr(this)}oe(Me,se);Me.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Te(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ay(t,null,t.Y),Zo(t)};Me.prototype.close=function(){th(this.g)};Me.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Gl(t),t=n);e.j.push(new o0(e.fb++,t)),e.H==3&&Zo(e)};Me.prototype.N=function(){this.g.h=null,delete this.j,th(this.g),delete this.g,Me.$.N.call(this)};function Cy(t){Jl.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}oe(Cy,Jl);function Ry(){Yl.call(this),this.status=1}oe(Ry,Yl);function lr(t){this.g=t}oe(lr,by);lr.prototype.Ba=function(){pe(this.g,"a")};lr.prototype.Aa=function(t){pe(this.g,new Cy(t))};lr.prototype.za=function(t){pe(this.g,new Ry)};lr.prototype.ya=function(){pe(this.g,"b")};function v0(){this.blockSize=-1}function Qe(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}oe(Qe,v0);Qe.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Il(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Qe.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Il(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Il(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Il(this,r),i=0;break}}this.h=i,this.i+=e};Qe.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function M(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var _0={};function ih(t){return-128<=t&&128>t?Nb(t,function(e){return new M([e|0],0>e?-1:0)}):new M([t|0],0>t?-1:0)}function lt(t){if(isNaN(t)||!isFinite(t))return ar;if(0>t)return fe(lt(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Vl;return new M(e,0)}function Dy(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return fe(Dy(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=lt(Math.pow(e,8)),r=ar,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=lt(Math.pow(e,s)),r=r.R(s).add(lt(o))):(r=r.R(n),r=r.add(lt(o)))}return r}var Vl=4294967296,ar=ih(0),xl=ih(1),Sm=ih(16777216);y=M.prototype;y.ea=function(){if(ze(this))return-fe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Vl+r)*e,e*=Vl}return t};y.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(wt(this))return"0";if(ze(this))return"-"+fe(this).toString(t);for(var e=lt(Math.pow(t,6)),n=this,r="";;){var i=Fo(n,e).g;n=Lo(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,wt(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};y.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function wt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ze(t){return t.h==-1}y.X=function(t){return t=Lo(this,t),ze(t)?-1:wt(t)?0:1};function fe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new M(n,~t.h).add(xl)}y.abs=function(){return ze(this)?fe(this):this};y.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new M(n,n[n.length-1]&-2147483648?-1:0)};function Lo(t,e){return t.add(fe(e))}y.R=function(t){if(wt(this)||wt(t))return ar;if(ze(this))return ze(t)?fe(this).R(fe(t)):fe(fe(this).R(t));if(ze(t))return fe(this.R(fe(t)));if(0>this.X(Sm)&&0>t.X(Sm))return lt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,ko(n,2*r+2*i),n[2*r+2*i+1]+=s*c,ko(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ko(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ko(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new M(n,0)};function ko(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ni(t,e){this.g=t,this.h=e}function Fo(t,e){if(wt(e))throw Error("division by zero");if(wt(t))return new Ni(ar,ar);if(ze(t))return e=Fo(fe(t),e),new Ni(fe(e.g),fe(e.h));if(ze(e))return e=Fo(t,fe(e)),new Ni(fe(e.g),e.h);if(30<t.g.length){if(ze(t)||ze(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xl,r=e;0>=r.X(t);)n=bm(n),r=bm(r);var i=sr(n,1),s=sr(r,1);for(r=sr(r,2),n=sr(n,2);!wt(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=sr(r,1),n=sr(n,1)}return e=Lo(t,i.R(e)),new Ni(i,e)}for(i=ar;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=lt(n),o=s.R(e);ze(o)||0<o.X(t);)n-=r,s=lt(n),o=s.R(e);wt(s)&&(s=xl),i=i.add(s),t=Lo(t,o)}return new Ni(i,t)}y.gb=function(t){return Fo(this,t).h};y.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new M(n,this.h&t.h)};y.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new M(n,this.h|t.h)};y.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new M(n,this.h^t.h)};function bm(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new M(n,t.h)}function sr(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new M(i,t.h)}xo.prototype.createWebChannel=xo.prototype.g;Me.prototype.send=Me.prototype.u;Me.prototype.open=Me.prototype.m;Me.prototype.close=Me.prototype.close;Ho.NO_ERROR=0;Ho.TIMEOUT=8;Ho.HTTP_ERROR=6;Hm.COMPLETE="complete";Wm.EventType=Hi;Hi.OPEN="a";Hi.CLOSE="b";Hi.ERROR="c";Hi.MESSAGE="d";se.prototype.listen=se.prototype.O;H.prototype.listenOnce=H.prototype.P;H.prototype.getLastError=H.prototype.Sa;H.prototype.getLastErrorCode=H.prototype.Ia;H.prototype.getStatus=H.prototype.da;H.prototype.getResponseJson=H.prototype.Wa;H.prototype.getResponseText=H.prototype.ja;H.prototype.send=H.prototype.ha;H.prototype.setWithCredentials=H.prototype.Oa;Qe.prototype.digest=Qe.prototype.l;Qe.prototype.reset=Qe.prototype.reset;Qe.prototype.update=Qe.prototype.j;M.prototype.add=M.prototype.add;M.prototype.multiply=M.prototype.R;M.prototype.modulo=M.prototype.gb;M.prototype.compare=M.prototype.X;M.prototype.toNumber=M.prototype.ea;M.prototype.toString=M.prototype.toString;M.prototype.getBits=M.prototype.D;M.fromNumber=lt;M.fromString=Dy;var Py=Je.createWebChannelTransport=function(){return new xo},Ny=Je.getStatEventTarget=function(){return Go()},ea=Je.ErrorCode=Ho,ky=Je.EventType=Hm,Oy=Je.Event=En,sh=Je.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},My=Je.FetchXmlHttpFactory=Qi,Xi=Je.WebChannel=Wm,Vy=Je.XhrIo=H,I0=Je.Md5=Qe,xy=Je.Integer=M;var Ly="@firebase/firestore";var ae=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ae.UNAUTHENTICATED=new ae(null),ae.GOOGLE_CREDENTIALS=new ae("google-credentials-uid"),ae.FIRST_PARTY=new ae("first-party-uid"),ae.MOCK_USER=new ae("mock-user");var Rr="10.11.1";var bn=new Ut("@firebase/firestore");function Zi(){return bn.logLevel}function _(t,...e){if(bn.logLevel<=R.DEBUG){let n=e.map(bd);bn.debug(`Firestore (${Rr}): ${t}`,...n)}}function Cn(t,...e){if(bn.logLevel<=R.ERROR){let n=e.map(bd);bn.error(`Firestore (${Rr}): ${t}`,...n)}}function oa(t,...e){if(bn.logLevel<=R.WARN){let n=e.map(bd);bn.warn(`Firestore (${Rr}): ${t}`,...n)}}function bd(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function D(t="Unexpected state"){let e=`FIRESTORE (${Rr}) INTERNAL ASSERTION FAILED: `+t;throw Cn(e),new Error(e)}function ue(t,e){t||D()}function q(t,e){return t}var p={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},I=class extends Ee{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Tt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var aa=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},uh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ae.UNAUTHENTICATED))}shutdown(){}},lh=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},hh=class{constructor(e){this.t=e,this.currentUser=ae.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Tt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>h(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{_("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(_("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(_("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ue(typeof r.accessToken=="string"),new aa(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new ae(e)}},dh=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ae.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},fh=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new dh(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ae.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ph=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},gh=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&_("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,_("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{_("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):_("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string"),this.R=n.token,new ph(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function w0(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ca=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=w0(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function j(t,e){return t<e?-1:t>e?1:0}function pr(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ie=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new I(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new I(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new I(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new I(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?j(this.nanoseconds,e.nanoseconds):j(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ie(0,0))}static max(){return new t(new Ie(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ua=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&D(),r===void 0?r=e.length-n:r>e.length-n&&D(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Z=class t extends ua{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new I(p.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},E0=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ve=class t extends ua{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return E0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new I(p.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new I(p.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new I(p.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new I(p.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var C=class t{constructor(e){this.path=e}static fromPath(e){return new t(Z.fromString(e))}static fromName(e){return new t(Z.fromString(e).popFirst(5))}static empty(){return new t(Z.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Z.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Z.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Z(e.slice()))}};var mh=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};mh.UNKNOWN_ID=-1;function T0(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new Rn(i,C.empty(),e)}function A0(t){return new Rn(t.readTime,t.key,-1)}var Rn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Q.min(),C.empty(),-1)}static max(){return new t(Q.max(),C.empty(),-1)}};function S0(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=C.comparator(t.documentKey,e.documentKey),n!==0?n:j(t.largestBatchId,e.largestBatchId))}var b0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function rv(t){return h(this,null,function*(){if(t.code!==p.FAILED_PRECONDITION||t.message!==b0)throw t;_("LocalStore","Unexpectedly lost primary lease")})}var g=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&D(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function C0(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ca(t){return t.name==="IndexedDbTransactionError"}var R0=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Cd(t){return t==null}function ss(t){return t===0&&1/t==-1/0}function D0(t){return typeof t=="number"&&Number.isInteger(t)&&!ss(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var P0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ok=[...P0,"documentOverlays"],N0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],k0=N0,Mk=[...k0,"indexConfiguration","indexState","indexEntries"];function Fy(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function us(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iv(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var xe=class t{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dr(this.root,e,this.comparator,!1)}getReverseIterator(){return new dr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dr(this.root,e,this.comparator,!0)}},dr=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pt=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw D();let e=this.left.check();if(e!==this.right.check())throw D();return e+(this.isRed()?0:1)}};pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw D()}get value(){throw D()}get color(){throw D()}get left(){throw D()}get right(){throw D()}copy(e,n,r,i,s){return this}insert(e,n,r){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class t{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new la(this.data.getIterator())}getIteratorFrom(e){return new la(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},la=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ft=class t{constructor(e){this.fields=e,e.sort(Ve.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ae(Ve.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pr(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var vh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Qt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vh("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return j(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qt.EMPTY_BYTE_STRING=new Qt("");var O0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jt(t){if(ue(!!t),typeof t=="string"){let e=0,n=O0.exec(t);if(ue(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ne(t.seconds),nanos:ne(t.nanos)}}function ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gr(t){return typeof t=="string"?Qt.fromBase64String(t):Qt.fromUint8Array(t)}function Rd(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sv(t){let e=t.mapValue.fields.__previous_value__;return Rd(e)?sv(e):e}function ha(t){let e=Jt(t.mapValue.fields.__local_write_time__.timestampValue);return new Ie(e.seconds,e.nanos)}var _h=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Ih=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ta={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rd(t)?4:ov(t)?9007199254740991:10:D()}function gt(t,e){if(t===e)return!0;let n=mr(t);if(n!==mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ha(t).isEqual(ha(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Jt(i.timestampValue),a=Jt(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return gr(i.bytesValue).isEqual(gr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ne(i.geoPointValue.latitude)===ne(s.geoPointValue.latitude)&&ne(i.geoPointValue.longitude)===ne(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ne(i.integerValue)===ne(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ne(i.doubleValue),a=ne(s.doubleValue);return o===a?ss(o)===ss(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return pr(t.arrayValue.values||[],e.arrayValue.values||[],gt);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Fy(o)!==Fy(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!gt(o[c],a[c])))return!1;return!0}(t,e);default:return D()}}function os(t,e){return(t.values||[]).find(n=>gt(n,e))!==void 0}function yr(t,e){if(t===e)return 0;let n=mr(t),r=mr(e);if(n!==r)return j(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return j(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ne(s.integerValue||s.doubleValue),c=ne(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Uy(t.timestampValue,e.timestampValue);case 4:return Uy(ha(t),ha(e));case 5:return j(t.stringValue,e.stringValue);case 6:return function(s,o){let a=gr(s),c=gr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=j(a[u],c[u]);if(l!==0)return l}return j(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=j(ne(s.latitude),ne(o.latitude));return a!==0?a:j(ne(s.longitude),ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=yr(a[u],c[u]);if(l)return l}return j(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ta.mapValue&&o===ta.mapValue)return 0;if(s===ta.mapValue)return 1;if(o===ta.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let f=j(c[d],l[d]);if(f!==0)return f;let m=yr(a[c[d]],u[l[d]]);if(m!==0)return m}return j(c.length,l.length)}(t.mapValue,e.mapValue);default:throw D()}}function Uy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return j(t,e);let n=Jt(t),r=Jt(e),i=j(n.seconds,r.seconds);return i!==0?i:j(n.nanos,r.nanos)}function vr(t){return wh(t)}function wh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Jt(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return C.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=wh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${wh(n.fields[o])}`;return i+"}"}(t.mapValue):D()}function Eh(t){return!!t&&"integerValue"in t}function Dd(t){return!!t&&"arrayValue"in t}function ia(t){return!!t&&"mapValue"in t}function ts(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return us(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ts(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ts(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ov(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var dt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ia(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ts(n)}setAll(e){let n=Ve.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ts(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());ia(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return gt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ia(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){us(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(ts(this.value))}};function av(t){let e=[];return us(t.fields,(n,r)=>{let i=new Ve([n]);if(ia(r)){let s=av(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new ft(e)}var _r=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Q.min(),Q.min(),Q.min(),dt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Q.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Q.min(),Q.min(),dt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Q.min(),Q.min(),dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ir=class{constructor(e,n){this.position=e,this.inclusive=n}};function jy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=C.comparator(C.fromName(o.referenceValue),n.key):r=yr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function By(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gt(t.position[n],e.position[n]))return!1;return!0}var wr=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function M0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var da=class{},ce=class t extends da{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Ah(e,n,r):n==="array-contains"?new Ch(e,r):n==="in"?new Rh(e,r):n==="not-in"?new Dh(e,r):n==="array-contains-any"?new Ph(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Sh(e,r):new bh(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yr(n,this.value)):n!==null&&mr(this.value)===mr(n)&&this.matchesComparison(yr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return D()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Yt=class t extends da{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return cv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function cv(t){return t.op==="and"}function uv(t){return V0(t)&&cv(t)}function V0(t){for(let e of t.filters)if(e instanceof Yt)return!1;return!0}function Th(t){if(t instanceof ce)return t.field.canonicalString()+t.op.toString()+vr(t.value);if(uv(t))return t.filters.map(e=>Th(e)).join(",");{let e=t.filters.map(n=>Th(n)).join(",");return`${t.op}(${e})`}}function lv(t,e){return t instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.field.isEqual(i.field)&&gt(r.value,i.value)}(t,e):t instanceof Yt?function(r,i){return i instanceof Yt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&lv(o,i.filters[a]),!0):!1}(t,e):void D()}function hv(t){return t instanceof ce?function(n){return`${n.field.canonicalString()} ${n.op} ${vr(n.value)}`}(t):t instanceof Yt?function(n){return n.op.toString()+" {"+n.getFilters().map(hv).join(" ,")+"}"}(t):"Filter"}var Ah=class extends ce{constructor(e,n,r){super(e,n,r),this.key=C.fromName(r.referenceValue)}matches(e){let n=C.comparator(e.key,this.key);return this.matchesComparison(n)}},Sh=class extends ce{constructor(e,n){super(e,"in",n),this.keys=dv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},bh=class extends ce{constructor(e,n){super(e,"not-in",n),this.keys=dv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function dv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>C.fromName(r.referenceValue))}var Ch=class extends ce{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Dd(n)&&os(n.arrayValue,this.value)}},Rh=class extends ce{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&os(this.value.arrayValue,n)}},Dh=class extends ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(os(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!os(this.value.arrayValue,n)}},Ph=class extends ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Dd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>os(this.value.arrayValue,r))}};var Nh=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function $y(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Nh(t,e,n,r,i,s,o)}function Pd(t){let e=q(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Th(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Cd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vr(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vr(r)).join(",")),e.ue=n}return e.ue}function Nd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!M0(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!By(t.startAt,e.startAt)&&By(t.endAt,e.endAt)}var Er=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function x0(t,e,n,r,i,s,o,a){return new Er(t,e,n,r,i,s,o,a)}function L0(t){return new Er(t)}function qy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function F0(t){return t.collectionGroup!==null}function ns(t){let e=q(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ae(Ve.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new wr(s,r))}),n.has(Ve.keyField().canonicalString())||e.ce.push(new wr(Ve.keyField(),r))}return e.ce}function An(t){let e=q(t);return e.le||(e.le=U0(e,ns(t))),e.le}function U0(t,e){if(t.limitType==="F")return $y(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new wr(i.field,s)});let n=t.endAt?new Ir(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ir(t.startAt.position,t.startAt.inclusive):null;return $y(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kh(t,e,n){return new Er(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fv(t,e){return Nd(An(t),An(e))&&t.limitType===e.limitType}function pv(t){return`${Pd(An(t))}|lt:${t.limitType}`}function es(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>hv(i)).join(", ")}]`),Cd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vr(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vr(i)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function kd(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):C.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of ns(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=jy(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,ns(r),i)||r.endAt&&!function(o,a,c){let u=jy(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,ns(r),i))}(t,e)}function j0(t){return(e,n)=>{let r=!1;for(let i of ns(t)){let s=B0(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function B0(t,e,n){let r=t.field.isKeyField()?C.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?yr(c,u):D()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return D()}}var Xt=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){us(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return iv(this.inner)}size(){return this.innerSize}};var $0=new xe(C.comparator);function fa(){return $0}var gv=new xe(C.comparator);function na(...t){let e=gv;for(let n of t)e=e.insert(n.key,n);return e}function mv(t){let e=gv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Tn(){return rs()}function yv(){return rs()}function rs(){return new Xt(t=>t.toString(),(t,e)=>t.isEqual(e))}var q0=new xe(C.comparator),z0=new Ae(C.comparator);function _e(...t){let e=z0;for(let n of t)e=e.add(n);return e}var G0=new Ae(j);function H0(){return G0}function vv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ss(e)?"-0":e}}function _v(t){return{integerValue:""+t}}function W0(t,e){return D0(e)?_v(e):vv(t,e)}var Tr=class{constructor(){this._=void 0}};function K0(t,e,n){return t instanceof Ar?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Rd(s)&&(s=sv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Dn?wv(t,e):t instanceof Pn?Ev(t,e):function(i,s){let o=Iv(i,s),a=zy(o)+zy(i.Pe);return Eh(o)&&Eh(i.Pe)?_v(a):vv(i.serializer,a)}(t,e)}function Q0(t,e,n){return t instanceof Dn?wv(t,e):t instanceof Pn?Ev(t,e):n}function Iv(t,e){return t instanceof Sr?function(r){return Eh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ar=class extends Tr{},Dn=class extends Tr{constructor(e){super(),this.elements=e}};function wv(t,e){let n=Tv(e);for(let r of t.elements)n.some(i=>gt(i,r))||n.push(r);return{arrayValue:{values:n}}}var Pn=class extends Tr{constructor(e){super(),this.elements=e}};function Ev(t,e){let n=Tv(e);for(let r of t.elements)n=n.filter(i=>!gt(i,r));return{arrayValue:{values:n}}}var Sr=class extends Tr{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function zy(t){return ne(t.integerValue||t.doubleValue)}function Tv(t){return Dd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function J0(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Dn&&i instanceof Dn||r instanceof Pn&&i instanceof Pn?pr(r.elements,i.elements,gt):r instanceof Sr&&i instanceof Sr?gt(r.Pe,i.Pe):r instanceof Ar&&i instanceof Ar}(t.transform,e.transform)}var Oh=class{constructor(e,n){this.version=e,this.transformResults=n}},Sn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function sa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var br=class{};function Av(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pa(t.key,Sn.none()):new Nn(t.key,t.data,Sn.none());{let n=t.data,r=dt.empty(),i=new Ae(Ve.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new St(t.key,r,new ft(i.toArray()),Sn.none())}}function Y0(t,e,n){t instanceof Nn?function(i,s,o){let a=i.value.clone(),c=Hy(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof St?function(i,s,o){if(!sa(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Hy(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Sv(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function is(t,e,n,r){return t instanceof Nn?function(s,o,a,c){if(!sa(s.precondition,o))return a;let u=s.value.clone(),l=Wy(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof St?function(s,o,a,c){if(!sa(s.precondition,o))return a;let u=Wy(s.fieldTransforms,c,o),l=o.data;return l.setAll(Sv(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return sa(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function X0(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Iv(r.transform,i||null);s!=null&&(n===null&&(n=dt.empty()),n.set(r.field,s))}return n||null}function Gy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&pr(r,i,(s,o)=>J0(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Nn=class extends br{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},St=class extends br{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Sv(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Hy(t,e,n){let r=new Map;ue(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Q0(o,a,n[i]))}return r}function Wy(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,K0(s,o,e))}return r}var pa=class extends br{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Mh=class extends br{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Vh=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Y0(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=is(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=is(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=yv();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=Av(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),_e())}isEqual(e){return this.batchId===e.batchId&&pr(this.mutations,e.mutations,(n,r)=>Gy(n,r))&&pr(this.baseMutations,e.baseMutations,(n,r)=>Gy(n,r))}},xh=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ue(e.mutations.length===r.length);let i=function(){return q0}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Lh=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Y,N;function Z0(t){switch(t){default:return D();case p.CANCELLED:case p.UNKNOWN:case p.DEADLINE_EXCEEDED:case p.RESOURCE_EXHAUSTED:case p.INTERNAL:case p.UNAVAILABLE:case p.UNAUTHENTICATED:return!1;case p.INVALID_ARGUMENT:case p.NOT_FOUND:case p.ALREADY_EXISTS:case p.PERMISSION_DENIED:case p.FAILED_PRECONDITION:case p.ABORTED:case p.OUT_OF_RANGE:case p.UNIMPLEMENTED:case p.DATA_LOSS:return!0}}function eC(t){if(t===void 0)return Cn("GRPC error has no .code"),p.UNKNOWN;switch(t){case Y.OK:return p.OK;case Y.CANCELLED:return p.CANCELLED;case Y.UNKNOWN:return p.UNKNOWN;case Y.DEADLINE_EXCEEDED:return p.DEADLINE_EXCEEDED;case Y.RESOURCE_EXHAUSTED:return p.RESOURCE_EXHAUSTED;case Y.INTERNAL:return p.INTERNAL;case Y.UNAVAILABLE:return p.UNAVAILABLE;case Y.UNAUTHENTICATED:return p.UNAUTHENTICATED;case Y.INVALID_ARGUMENT:return p.INVALID_ARGUMENT;case Y.NOT_FOUND:return p.NOT_FOUND;case Y.ALREADY_EXISTS:return p.ALREADY_EXISTS;case Y.PERMISSION_DENIED:return p.PERMISSION_DENIED;case Y.FAILED_PRECONDITION:return p.FAILED_PRECONDITION;case Y.ABORTED:return p.ABORTED;case Y.OUT_OF_RANGE:return p.OUT_OF_RANGE;case Y.UNIMPLEMENTED:return p.UNIMPLEMENTED;case Y.DATA_LOSS:return p.DATA_LOSS;default:return D()}}(N=Y||(Y={}))[N.OK=0]="OK",N[N.CANCELLED=1]="CANCELLED",N[N.UNKNOWN=2]="UNKNOWN",N[N.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",N[N.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",N[N.NOT_FOUND=5]="NOT_FOUND",N[N.ALREADY_EXISTS=6]="ALREADY_EXISTS",N[N.PERMISSION_DENIED=7]="PERMISSION_DENIED",N[N.UNAUTHENTICATED=16]="UNAUTHENTICATED",N[N.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",N[N.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",N[N.ABORTED=10]="ABORTED",N[N.OUT_OF_RANGE=11]="OUT_OF_RANGE",N[N.UNIMPLEMENTED=12]="UNIMPLEMENTED",N[N.INTERNAL=13]="INTERNAL",N[N.UNAVAILABLE=14]="UNAVAILABLE",N[N.DATA_LOSS=15]="DATA_LOSS";var xk=new xy([4294967295,4294967295],0);var Fh=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Uh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nC(t,e){return Uh(t,e.toTimestamp())}function fr(t){return ue(!!t),Q.fromTimestamp(function(n){let r=Jt(n);return new Ie(r.seconds,r.nanos)}(t))}function bv(t,e){return jh(t,e).canonicalString()}function jh(t,e){let n=function(i){return new Z(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function rC(t){let e=Z.fromString(t);return ue(hC(e)),e}function Bh(t,e){return bv(t.databaseId,e.path)}function iC(t){let e=rC(t);return e.length===4?Z.emptyPath():oC(e)}function sC(t){return new Z(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oC(t){return ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ky(t,e,n){return{name:Bh(t,e),fields:n.value.mapValue.fields}}function aC(t,e){let n;if(e instanceof Nn)n={update:Ky(t,e.key,e.value)};else if(e instanceof pa)n={delete:Bh(t,e.key)};else if(e instanceof St)n={update:Ky(t,e.key,e.data),updateMask:lC(e.fieldMask)};else{if(!(e instanceof Mh))return D();n={verify:Bh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ar)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pn)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sr)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw D()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:nC(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:D()}(t,e.precondition)),n}function cC(t,e){return t&&t.length>0?(ue(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?fr(i.updateTime):fr(s);return o.isEqual(Q.min())&&(o=fr(s)),new Oh(o,i.transformResults||[])}(n,e))):[]}function uC(t){let e=iC(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ue(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let f=Cv(d);return f instanceof Yt&&uv(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(A){return new wr(hr(A.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Cd(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(d){let f=!!d.before,m=d.values||[];return new Ir(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let f=!d.before,m=d.values||[];return new Ir(m,f)}(n.endAt)),x0(e,i,o,s,a,"F",c,u)}function Cv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=hr(n.unaryFilter.field);return ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=hr(n.unaryFilter.field);return ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=hr(n.unaryFilter.field);return ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=hr(n.unaryFilter.field);return ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return D()}}(t):t.fieldFilter!==void 0?function(n){return ce.create(hr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return D()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yt.create(n.compositeFilter.filters.map(r=>Cv(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return D()}}(n.compositeFilter.op))}(t):D()}function hr(t){return Ve.fromServerFormat(t.fieldPath)}function lC(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var $h=class{constructor(e){this.ut=e}};function dC(t){let e=uC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kh(e,e.limit,"L"):e}var ga=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(ne(e.integerValue));else if("doubleValue"in e){let r=ne(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),ss(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=Jt(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(gr(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?ov(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):D()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),C.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};ga.St=new ga;var qh=class{constructor(){this.on=new zh}addToCollectionParentIndex(e,n){return this.on.add(n),g.resolve()}getCollectionParents(e,n){return g.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return g.resolve()}deleteFieldIndex(e,n){return g.resolve()}deleteAllFieldIndexes(e){return g.resolve()}createTargetIndexes(e,n){return g.resolve()}getDocumentsMatchingTarget(e,n){return g.resolve(null)}getIndexType(e,n){return g.resolve(0)}getFieldIndexes(e,n){return g.resolve([])}getNextCollectionGroupToUpdate(e){return g.resolve(null)}getMinOffset(e,n){return g.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,n){return g.resolve(Rn.min())}updateCollectionGroup(e,n,r){return g.resolve()}updateIndexEntries(e,n){return g.resolve()}},zh=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(Z.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(Z.comparator)).toArray()}};var Lk=new Uint8Array(0);var ht=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ht.DEFAULT_COLLECTION_PERCENTILE=10,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ht.DEFAULT=new ht(41943040,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ht.DISABLED=new ht(-1,0,0);var as=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Gh=class{constructor(){this.changes=new Xt(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?g.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Hh=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Wh=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&is(r.mutation,i,ft.empty(),Ie.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,n,r=_e()){let i=Tn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=na();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Tn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,_e()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=fa(),o=rs(),a=function(){return rs()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof St)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),is(l.mutation,u,l.mutation.getFieldMask(),Ie.now())):o.set(u.key,ft.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new Hh(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=rs(),i=new xe((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||ft.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||_e()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=yv();l.forEach(f=>{if(!s.has(f)){let m=Av(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return g.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return C.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):F0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):g.resolve(Tn()),a=-1,c=s;return o.next(u=>g.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?g.resolve():this.remoteDocumentCache.getEntry(e,l).next(f=>{c=c.insert(l,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,_e())).next(l=>({batchId:a,changes:mv(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new C(n)).next(r=>{let i=na();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=na();return this.indexManager.getCollectionParents(e,s).next(a=>g.forEach(a,c=>{let u=function(d,f){return new Er(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,_r.newInvalidDocument(l)))});let a=na();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&is(l.mutation,u,ft.empty(),Ie.now()),kd(n,u)&&(a=a.insert(c,u))}),a})}};var Kh=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return g.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:fr(i.createTime)}}(n)),g.resolve()}getNamedQuery(e,n){return g.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:dC(i.bundledQuery),readTime:fr(i.readTime)}}(n)),g.resolve()}};var Qh=class{constructor(){this.overlays=new xe(C.comparator),this.lr=new Map}getOverlay(e,n){return g.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Tn();return g.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),g.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),g.resolve()}getOverlaysForCollection(e,n,r){let i=Tn(),s=n.length+1,o=new C(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return g.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new xe((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=Tn(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Tn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return g.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Lh(n,r));let s=this.lr.get(n);s===void 0&&(s=_e(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var cs=class{constructor(){this.hr=new Ae(X.Pr),this.Ir=new Ae(X.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new X(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new X(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new C(new Z([])),r=new X(n,e),i=new X(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new C(new Z([])),r=new X(n,e),i=new X(n,e+1),s=_e();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new X(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},X=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return C.comparator(e.key,n.key)||j(e.gr,n.gr)}static Tr(e,n){return j(e.gr,n.gr)||C.comparator(e.key,n.key)}};var Jh=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ae(X.Pr)}checkEmpty(e){return g.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Vh(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new X(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return g.resolve(o)}lookupMutationBatch(e,n){return g.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return g.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return g.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return g.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new X(n,0),i=new X(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),g.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(j);return n.forEach(i=>{let s=new X(i,0),o=new X(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),g.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;C.isDocumentKey(s)||(s=s.child(""));let o=new X(new C(s),0),a=new Ae(j);return this.yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},o),g.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ue(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return g.forEach(n.mutations,i=>{let s=new X(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new X(n,0),i=this.yr.firstAfterOrEqual(r);return g.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,g.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Yh=class{constructor(e){this.Cr=e,this.docs=function(){return new xe(C.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return g.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(n))}getEntries(e,n){let r=fa();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_r.newInvalidDocument(i))}),g.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fa(),o=n.path,a=new C(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||S0(A0(l),r)<=0||(i.has(l.key)||kd(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return g.resolve(s)}getAllFromCollectionGroup(e,n,r,i){D()}vr(e,n){return g.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Xh(this)}getSize(e){return g.resolve(this.size)}},Xh=class extends Gh{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),g.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var Zh=class{constructor(e){this.persistence=e,this.Fr=new Xt(n=>Pd(n),Nd),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Mr=0,this.Or=new cs,this.targetCount=0,this.Nr=as.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),g.resolve()}getLastRemoteSnapshotVersion(e){return g.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return g.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),g.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),g.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new as(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,g.resolve()}updateTargetData(e,n){return this.kn(n),g.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,g.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),g.waitFor(s).next(()=>i)}getTargetCount(e){return g.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return g.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),g.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),g.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),g.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return g.resolve(r)}containsKey(e,n){return g.resolve(this.Or.containsKey(n))}};var ed=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new R0(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Zh(this),this.indexManager=new qh,this.remoteDocumentCache=function(i){return new Yh(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new $h(n),this.Kr=new Kh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Qh,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Jh(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){_("MemoryPersistence","Starting transaction:",e);let i=new td(this.Br.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return g.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},td=class extends yh{constructor(e){super(),this.currentSequenceNumber=e}},nd=class t{constructor(e){this.persistence=e,this.Gr=new cs,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw D()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),g.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),g.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),g.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return g.forEach(this.Hr,r=>{let i=C.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,Q.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return g.or([()=>g.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var rd=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=_e(),i=_e();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var id=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var sd=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return sg()?8:C0(te())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new id;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Zi()<=R.DEBUG&&_("QueryEngine","SDK will not create cache indexes for query:",es(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),g.resolve()):(Zi()<=R.DEBUG&&_("QueryEngine","Query:",es(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Zi()<=R.DEBUG&&_("QueryEngine","The SDK decides to create cache indexes for query:",es(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):g.resolve())}zi(e,n){if(qy(n))return g.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=kh(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=_e(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Yi(n,a);return this.Zi(n,u,o,c.readTime)?this.zi(e,kh(n,null,"F")):this.Xi(e,u,n,c)}))})))}ji(e,n,r,i){return qy(n)||i.isEqual(Q.min())?g.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?g.resolve(null):(Zi()<=R.DEBUG&&_("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),es(n)),this.Xi(e,o,n,T0(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ae(j0(e));return n.forEach((i,s)=>{kd(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Zi()<=R.DEBUG&&_("QueryEngine","Using full collection scan to execute query:",es(n)),this.Gi.getDocumentsMatchingQuery(e,n,Rn.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var od=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new xe(j),this.ns=new Xt(s=>Pd(s),Nd),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wh(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function fC(t,e,n,r){return new od(t,e,n,r)}function Rv(t,e){return h(this,null,function*(){let n=q(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=_e();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})})}function pC(t,e){let n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,f=d.keys(),m=g.resolve();return f.forEach(A=>{m=m.next(()=>l.getEntry(c,A)).next(k=>{let P=u.docVersions.get(A);ue(P!==null),k.version.compareTo(P)<0&&(d.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),l.addEntry(k)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=_e();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function gC(t){let e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function mC(t,e){let n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var ma=class{constructor(){this.activeTargetIds=H0()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ad=class{constructor(){this.eo=new ma,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new ma,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cd=class{ro(e){}shutdown(){}};var ya=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ra=null;function oh(){return ra===null?ra=function(){return 268435456+Math.round(2147483648*Math.random())}():ra++,"0x"+ra.toString(16)}var yC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var ud=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var ve="WebChannelConnection",ld=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get bo(){return!1}Do(n,r,i,s,o){let a=oh(),c=this.Co(n,r.toUriEncodedString());_("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(u,s,o),this.Fo(n,c,u,i).then(l=>(_("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw oa("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Mo(n,r,i,s,o,a){return this.Do(n,r,i,s,o)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Co(n,r){let i=yC[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let s=oh();return new Promise((o,a)=>{let c=new Vy;c.setWithCredentials(!0),c.listenOnce(ky.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ea.NO_ERROR:let l=c.getResponseJson();_(ve,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case ea.TIMEOUT:_(ve,`RPC '${e}' ${s} timed out`),a(new I(p.DEADLINE_EXCEEDED,"Request time out"));break;case ea.HTTP_ERROR:let d=c.getStatus();if(_(ve,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);let m=f?.error;if(m&&m.status&&m.message){let A=function(P){let F=P.toLowerCase().replace(/_/g,"-");return Object.values(p).indexOf(F)>=0?F:p.UNKNOWN}(m.status);a(new I(A,m.message))}else a(new I(p.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new I(p.UNAVAILABLE,"Connection failed."));break;default:D()}}finally{_(ve,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);_(ve,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}xo(e,n,r){let i=oh(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Py(),a=Ny(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new My({})),this.vo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");_(ve,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),f=!1,m=!1,A=new ud({co:P=>{m?_(ve,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(f||(_(ve,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),_(ve,`RPC '${e}' stream ${i} sending:`,P),d.send(P))},lo:()=>d.close()}),k=(P,F,le)=>{P.listen(F,Le=>{try{le(Le)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return k(d,Xi.EventType.OPEN,()=>{m||(_(ve,`RPC '${e}' stream ${i} transport opened.`),A.Vo())}),k(d,Xi.EventType.CLOSE,()=>{m||(m=!0,_(ve,`RPC '${e}' stream ${i} transport closed`),A.fo())}),k(d,Xi.EventType.ERROR,P=>{m||(m=!0,oa(ve,`RPC '${e}' stream ${i} transport errored:`,P),A.fo(new I(p.UNAVAILABLE,"The operation could not be completed")))}),k(d,Xi.EventType.MESSAGE,P=>{var F;if(!m){let le=P.data[0];ue(!!le);let Le=le,Ze=Le.error||((F=Le[0])===null||F===void 0?void 0:F.error);if(Ze){_(ve,`RPC '${e}' stream ${i} received error:`,Ze);let Mr=Ze.status,tn=function(xr){let ys=Y[xr];if(ys!==void 0)return eC(ys)}(Mr),Vr=Ze.message;tn===void 0&&(tn=p.INTERNAL,Vr="Unknown error status: "+Mr+" with message "+Ze.message),m=!0,A.fo(new I(tn,Vr)),d.close()}else _(ve,`RPC '${e}' stream ${i} received:`,le),A.po(le)}}),k(a,Oy.STAT_EVENT,P=>{P.stat===sh.PROXY?_(ve,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===sh.NOPROXY&&_(ve,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.mo()},0),A}};function ah(){return typeof document<"u"?document:null}function Ra(t){return new Fh(t,!0)}var va=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&_("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var hd=class{constructor(e,n,r,i,s,o,a,c){this.si=e,this.Wo=r,this.Go=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new va(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return h(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return h(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return h(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===p.RESOURCE_EXHAUSTED?(Cn(n.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===p.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new I(p.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>h(this,null,function*(){this.state=0,this.start()}))}u_(e){return _("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var dd=class extends hd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=cC(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.d_(r,n)}return ue(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=sC(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>aC(this.serializer,r))};this.r_(n)}};var fd=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new I(p.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,jh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new I(p.UNKNOWN,s.toString())})}Mo(e,n,r,i,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,jh(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===p.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new I(p.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var pd=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Cn(n),this.y_=!1):_("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var gd=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{r.enqueueAndForget(()=>h(this,null,function*(){hs(this)&&(_("RemoteStore","Restarting streams for network reachability change."),yield function(c){return h(this,null,function*(){let u=q(c);u.M_.add(4),yield ls(u),u.N_.set("Unknown"),u.M_.delete(4),yield Da(u)})}(this))}))}),this.N_=new pd(r,i)}};function Da(t){return h(this,null,function*(){if(hs(t))for(let e of t.x_)yield e(!0)})}function ls(t){return h(this,null,function*(){for(let e of t.x_)yield e(!1)})}function hs(t){return q(t).M_.size===0}function Dv(t,e,n){return h(this,null,function*(){if(!Ca(e))throw e;t.M_.add(1),yield ls(t),t.N_.set("Offline"),n||(n=()=>gC(t.localStore)),t.asyncQueue.enqueueRetryable(()=>h(this,null,function*(){_("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Da(t)}))})}function Pv(t,e){return e().catch(n=>Dv(t,n,e))}function Pa(t){return h(this,null,function*(){let e=q(t),n=Zt(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;vC(e);)try{let i=yield mC(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,_C(e,i)}catch(i){yield Dv(e,i)}Nv(e)&&kv(e)})}function vC(t){return hs(t)&&t.v_.length<10}function _C(t,e){t.v_.push(e);let n=Zt(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function Nv(t){return hs(t)&&!Zt(t).Yo()&&t.v_.length>0}function kv(t){Zt(t).start()}function IC(t){return h(this,null,function*(){Zt(t).R_()})}function wC(t){return h(this,null,function*(){let e=Zt(t);for(let n of t.v_)e.E_(n.mutations)})}function EC(t,e,n){return h(this,null,function*(){let r=t.v_.shift(),i=xh.from(r,e,n);yield Pv(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Pa(t)})}function TC(t,e){return h(this,null,function*(){e&&Zt(t).T_&&(yield function(r,i){return h(this,null,function*(){if(function(o){return Z0(o)&&o!==p.ABORTED}(i.code)){let s=r.v_.shift();Zt(r).e_(),yield Pv(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Pa(r)}})}(t,e)),Nv(t)&&kv(t)})}function Qy(t,e){return h(this,null,function*(){let n=q(t);n.asyncQueue.verifyOperationInProgress(),_("RemoteStore","RemoteStore received new credentials");let r=hs(n);n.M_.add(3),yield ls(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Da(n)})}function AC(t,e){return h(this,null,function*(){let n=q(t);e?(n.M_.delete(2),yield Da(n)):e||(n.M_.add(2),yield ls(n),n.N_.set("Unknown"))})}function Zt(t){return t.k_||(t.k_=function(n,r,i){let s=q(n);return s.m_(),new dd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:IC.bind(null,t),Eo:TC.bind(null,t),A_:wC.bind(null,t),d_:EC.bind(null,t)}),t.x_.push(e=>h(this,null,function*(){e?(t.k_.e_(),yield Pa(t)):(yield t.k_.stop(),t.v_.length>0&&(_("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var md=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new I(p.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ov(t,e){if(Cn("AsyncQueue",`${e}: ${t}`),Ca(t))return new I(p.UNAVAILABLE,`${e}: ${t}`);throw t}var yd=class{constructor(){this.queries=new Xt(e=>pv(e),fv),this.onlineState="Unknown",this.z_=new Set}};function SC(t){t.z_.forEach(e=>{e.next()})}var Jy,Yy;(Yy=Jy||(Jy={})).J_="default",Yy.Cache="cache";var vd=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Xt(a=>pv(a),fv),this.Da=new Map,this.Ca=new Set,this.va=new xe(C.comparator),this.Fa=new Map,this.Ma=new cs,this.xa={},this.Oa=new Map,this.Na=as.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function bC(t,e,n){return h(this,null,function*(){let r=PC(t);try{let i=yield function(o,a){let c=q(o),u=Ie.now(),l=a.reduce((m,A)=>m.add(A.key),_e()),d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let A=fa(),k=_e();return c.ss.getEntries(m,l).next(P=>{A=P,A.forEach((F,le)=>{le.isValidDocument()||(k=k.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,A)).next(P=>{d=P;let F=[];for(let le of a){let Le=X0(le,d.get(le.key).overlayedDocument);Le!=null&&F.push(new St(le.key,Le,av(Le.value.mapValue),Sn.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,F,a)}).next(P=>{f=P;let F=P.applyToLocalDocumentSet(d,k);return c.documentOverlayCache.saveOverlays(m,P.batchId,F)})}).then(()=>({batchId:f.batchId,changes:mv(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new xe(j)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield Na(r,i.changes),yield Pa(r.remoteStore)}catch(i){let s=Ov(i,"Failed to persist write");n.reject(s)}})}function Xy(t,e,n){let r=q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=q(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let f of d.U_)f.j_(a)&&(u=!0)}),u&&SC(c)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CC(t,e){return h(this,null,function*(){let n=q(t),r=e.batch.batchId;try{let i=yield pC(n.localStore,e);Vv(n,r,null),Mv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Na(n,i)}catch(i){yield rv(i)}})}function RC(t,e,n){return h(this,null,function*(){let r=q(t);try{let i=yield function(o,a){let c=q(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(ue(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);Vv(r,e,n),Mv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Na(r,i)}catch(i){yield rv(i)}})}function Mv(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function Vv(t,e,n){let r=q(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Na(t,e,n){return h(this,null,function*(){let r=q(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=rd.Qi(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.Sa.l_(i),yield function(c,u){return h(this,null,function*(){let l=q(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>g.forEach(u,f=>g.forEach(f.ki,m=>l.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>g.forEach(f.qi,m=>l.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Ca(d))throw d;_("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let f=d.targetId;if(!d.fromCache){let m=l.ts.get(f),A=m.snapshotVersion,k=m.withLastLimboFreeSnapshotVersion(A);l.ts=l.ts.insert(f,k)}}})}(r.localStore,s))})}function DC(t,e){return h(this,null,function*(){let n=q(t);if(!n.currentUser.isEqual(e)){_("SyncEngine","User change. New user:",e.toKey());let r=yield Rv(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new I(p.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Na(n,r._s)}})}function PC(t){let e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RC.bind(null,e),e}var _a=class{constructor(){this.synchronizeTabs=!1}initialize(e){return h(this,null,function*(){this.serializer=Ra(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return fC(this.persistence,new sd,e.initialUser,this.serializer)}createPersistence(e){return new ed(nd.jr,this.serializer)}createSharedClientState(e){return new ad}terminate(){return h(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var _d=class{initialize(e,n){return h(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DC.bind(null,this.syncEngine),yield AC(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new yd}()}createDatastore(e){let n=Ra(e.databaseInfo.databaseId),r=function(s){return new ld(s)}(e.databaseInfo);return function(s,o,a,c){return new fd(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new gd(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Xy(this.syncEngine,n,0),function(){return ya.D()?new ya:new cd}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new vd(i,s,o,a,c,u);return l&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return h(this,null,function*(){var e;yield function(r){return h(this,null,function*(){let i=q(r);_("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield ls(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Id=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ae.UNAUTHENTICATED,this.clientId=ca.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>h(this,null,function*(){_("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(_("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new I(p.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Tt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>h(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ov(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ch(t,e){return h(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),_("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>h(this,null,function*(){r.isEqual(i)||(yield Rv(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Zy(t,e){return h(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield kC(t);_("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Qy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Qy(e.remoteStore,i)),t._onlineComponents=e})}function NC(t){return t.name==="FirebaseError"?t.code===p.FAILED_PRECONDITION||t.code===p.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function kC(t){return h(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ch(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!NC(n))throw n;oa("Error using user provided cache. Falling back to memory cache: "+n),yield ch(t,new _a)}}else _("FirestoreClient","Using default OfflineComponentProvider"),yield ch(t,new _a);return t._offlineComponents})}function OC(t){return h(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(_("FirestoreClient","Using user provided OnlineComponentProvider"),yield Zy(t,t._uninitializedComponentsProvider._online)):(_("FirestoreClient","Using default OnlineComponentProvider"),yield Zy(t,new _d))),t._onlineComponents})}function MC(t){return OC(t).then(e=>e.syncEngine)}function xv(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var ev=new Map;function Lv(t,e,n){if(!n)throw new I(p.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function VC(t,e,n,r){if(e===!0&&r===!0)throw new I(p.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function tv(t){if(!C.isDocumentKey(t))throw new I(p.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function nv(t){if(C.isDocumentKey(t))throw new I(p.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Od(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":D()}function Fv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new I(p.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Od(t);throw new I(p.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Ia=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new I(p.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new I(p.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new I(p.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new I(p.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new I(p.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Cr=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ia({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new I(p.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new I(p.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ia(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uh;switch(r.type){case"firstParty":return new fh(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new I(p.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=ev.get(n);r&&(_("ComponentProvider","Removing Datastore"),ev.delete(n),r.terminate())}(this),Promise.resolve()}};function Uv(t,e,n,r={}){var i;let s=(t=Fv(t,Cr))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&oa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ae.MOCK_USER;else{a=eg(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new I(p.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ae(u)}t._authCredentials=new lh(new aa(a,c))}}var wd=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},At=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Kt=class t extends wd{constructor(e,n,r){super(e,n,L0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new C(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Dr(t,e,...n){if(t=ge(t),Lv("collection","path",e),t instanceof Cr){let r=Z.fromString(e,...n);return nv(r),new Kt(t,null,r)}{if(!(t instanceof At||t instanceof Kt))throw new I(p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Z.fromString(e,...n));return nv(r),new Kt(t.firestore,null,r)}}function jv(t,e,...n){if(t=ge(t),arguments.length===1&&(e=ca.newId()),Lv("doc","path",e),t instanceof Cr){let r=Z.fromString(e,...n);return tv(r),new At(t,null,new C(r))}{if(!(t instanceof At||t instanceof Kt))throw new I(p.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Z.fromString(e,...n));return tv(r),new At(t.firestore,t instanceof Kt?t.converter:null,new C(r))}}var Ed=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new va(this,"async_queue_retry"),this.hu=()=>{let n=ah();n&&_("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=ah();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=ah();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Tt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return h(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!Ca(e))throw e;_("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Cn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=md.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&D()}verifyOperationInProgress(){}du(){return h(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var wa=class extends Cr{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Ed}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$v(this),this._firestoreClient.terminate()}};function Bv(t,e){let n=typeof t=="object"?t:yt(),r=typeof t=="string"?t:e||"(default)",i=st(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Zp("firestore");s&&Uv(i,...s)}return i}function xC(t){return t._firestoreClient||$v(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $v(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new _h(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,xv(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Id(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ea=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Qt.fromBase64String(e))}catch(n){throw new I(p.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ta=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new I(p.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ve(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Aa=class{constructor(e){this._methodName=e}};var Sa=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new I(p.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new I(p.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return j(this._lat,e._lat)||j(this._long,e._long)}};var LC=/^__.*__$/,Td=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new St(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nn(e,this.data,n,this.fieldTransforms)}};function qv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw D()}}var Ad=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return ba(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(qv(this.fu)&&LC.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Sd=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ra(e)}Fu(e,n,r,i=!1){return new Ad({fu:e,methodName:n,vu:r,path:Ve.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function FC(t){let e=t._freezeSettings(),n=Ra(t._databaseId);return new Sd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UC(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Wv("Data must be an object, but it was:",o,r);let a=Gv(r,o),c,u;if(s.merge)c=new ft(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let f=jC(e,d,n);if(!o.contains(f))throw new I(p.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);qC(l,f)||l.push(f)}c=new ft(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new Td(new dt(a),c,u)}function zv(t,e){if(Hv(t=ge(t)))return Wv("Unsupported field value:",e,t),Gv(t,e);if(t instanceof Aa)return function(r,i){if(!qv(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=zv(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return W0(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ie.fromDate(r);return{timestampValue:Uh(i.serializer,s)}}if(r instanceof Ie){let s=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uh(i.serializer,s)}}if(r instanceof Sa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ea)return{bytesValue:tC(i.serializer,r._byteString)};if(r instanceof At){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bv(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Od(r)}`)}(t,e)}function Gv(t,e){let n={};return iv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):us(t,(r,i)=>{let s=zv(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Hv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof Sa||t instanceof Ea||t instanceof At||t instanceof Aa)}function Wv(t,e,n){if(!Hv(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Od(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function jC(t,e,n){if((e=ge(e))instanceof Ta)return e._internalPath;if(typeof e=="string")return $C(t,e);throw ba("Field path arguments must be of type string or ",t,!1,void 0,n)}var BC=new RegExp("[~\\*/\\[\\]]");function $C(t,e,n){if(e.search(BC)>=0)throw ba(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ta(...e.split("."))._internalPath}catch{throw ba(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ba(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new I(p.INVALID_ARGUMENT,a+t+c)}function qC(t,e){return t.some(n=>n.isEqual(e))}function zC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function Pr(t,e){let n=Fv(t.firestore,wa),r=jv(t),i=zC(t.converter,e);return GC(n,[UC(FC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Sn.exists(!1))]).then(()=>r)}function GC(t,e){return function(r,i){let s=new Tt;return r.asyncQueue.enqueueAndForget(()=>h(this,null,function*(){return bC(yield MC(r),i,s)})),s.promise}(xC(t),e)}(function(e,n=!0){(function(i){Rr=i})(Bt),be(new ie("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new wa(new hh(r.getProvider("auth-internal")),new gh(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new I(p.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ih(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),L(Ly,"4.6.1",e),L(Ly,"4.6.1","esm2017")})();var HC="firebase",WC="10.11.1";L(HC,WC,"app");var bt=new Gr("ANGULARFIRE2_VERSION"),Kv=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function Or(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var On=(t,e)=>{let n=e?[e]:so(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},kr=class{constructor(){return On(KC)}},KC="app-check";function Nr(){}var ka=class{zone;delegate;constructor(e,n=lf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Md=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Nr,{},Nr,Nr)),n.pipe(re({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},en=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ka(Zone.current)),this.insideAngular=n.run(()=>new ka(Zone.current,uf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(z(K))};static \u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Oa(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function QC(t){return Oa().ngZone.runOutsideAngular(()=>t())}function kn(t){return Oa().ngZone.run(()=>t())}function JC(t){return YC(Oa())(t)}function YC(t){return function(n){return n=n.lift(new Md(t.ngZone)),n.pipe(Ha(t.outsideAngular),Ga(t.insideAngular))}}var XC=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),kn(()=>t.apply(void 0,r))},Ct=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=kn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Nr,{},Nr,Nr))),r[s]=XC(r[s],n));let i=QC(()=>t.apply(this,r));if(!e)if(i instanceof Ba){let s=Oa();return i.pipe(Ha(s.outsideAngular),Ga(s.insideAngular))}else return kn(()=>i);return i instanceof Ba?i.pipe(JC):i instanceof Promise?kn(()=>new Promise((s,o)=>i.then(a=>kn(()=>s(a)),a=>kn(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:kn(()=>i)};var Ye=class{constructor(e){return e}},Rt=class{constructor(){return so()}};function ZC(t){return t&&t.length===1?t[0]:new Ye(yt())}var Vd=new U("angularfire2._apps"),eR={provide:Ye,useFactory:ZC,deps:[[new he,Vd]]},tR={provide:Rt,deps:[[new he,Vd]]};function nR(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ye(r)}}var rR=(()=>{class t{constructor(n){L("angularfire",bt.full,"core"),L("angularfire",bt.full,"app"),L("angular",Vf.full,n.toString())}static \u0275fac=function(r){return new(r||t)(z(sn))};static \u0275mod=De({type:t});static \u0275inj=Re({providers:[eR,tR]})}return t})();function Ma(t,...e){return{ngModule:rR,providers:[{provide:Vd,useFactory:nR(t),multi:!0,deps:[K,Ge,en,...e]}]}}var Va=Ct(Ou,!0);var Qv="auth",Xe=class{constructor(e){return e}},ds=class{constructor(){return On(Qv)}};var xd=new U("angularfire2.auth-instances");function iR(t,e){let n=Or(Qv,t,e);return n&&new Xe(n)}function sR(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Xe(r)}}var oR={provide:ds,deps:[[new he,xd]]},aR={provide:Xe,useFactory:iR,deps:[[new he,xd],Ye]},cR=(()=>{class t{constructor(){L("angularfire",bt.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=De({type:t});static \u0275inj=Re({providers:[aR,oR]})}return t})();function Jv(t,...e){return{ngModule:cR,providers:[{provide:xd,useFactory:sR(t),multi:!0,deps:[K,Ge,en,Rt,[new he,kr],...e]}]}}var Yv=Ct(hl,!0);var Xv=Ct(gl,!0);var Dt=class{constructor(e){return e}},Zv="firestore",Fd=class{constructor(){return On(Zv)}};var Ud=new U("angularfire2.firestore-instances");function uR(t,e){let n=Or(Zv,t,e);return n&&new Dt(n)}function lR(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Dt(r)}}var hR={provide:Fd,deps:[[new he,Ud]]},dR={provide:Dt,useFactory:uR,deps:[[new he,Ud],Ye]},fR=(()=>{class t{constructor(){L("angularfire",bt.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=De({type:t});static \u0275inj=Re({providers:[dR,hR]})}return t})();function fs(t,...e){return{ngModule:fR,providers:[{provide:Ud,useFactory:lR(t),multi:!0,deps:[K,Ge,en,Rt,[new he,ds],[new he,kr],...e]}]}}var ps=Ct(Bv,!0);var t_=(()=>{let e=class e{constructor(r,i,s){this.firestore=r,this.Auth=i,this.router=s,this.email="",this.password="",this.emailLogeado=""}LoginRapido(){vn(this.Auth,"prueba@prueba.com","prueba").then(r=>{if(r.user.email!=null){localStorage.setItem("userLogin",r.user.email);let i=Dr(this.firestore,"logins");Pr(i,{fecha:new Date,email:this.email}),this.router.navigateByUrl("/home")}}).catch(r=>console.log(r))}Login(){vn(this.Auth,this.email,this.password).then(r=>{if(r.user.email!=null){localStorage.setItem("userLogin",r.user.email);let i=Dr(this.firestore,"logins");Pr(i,{fecha:new Date,email:this.email}),this.router.navigateByUrl("/home")}}).catch(r=>console.log(r))}Registrarse(){this.router.navigateByUrl("registro")}};e.\u0275fac=function(i){return new(i||e)(B(Dt),B(Xe),B(it))},e.\u0275cmp=je({type:e,selectors:[["app-login"]],standalone:!0,features:[Be],decls:14,vars:2,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"text-center","text-primary"],[1,"form-control","my-2",3,"ngModelChange","ngModel"],[1,"d-grid","gap-2"],[1,"btn","btn-primary",3,"click"]],template:function(i,s){i&1&&(ee(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),we(4,"Ingresar usuario"),J(),ee(5,"input",4),$n("ngModelChange",function(a){return Bn(s.email,a)||(s.email=a),a}),J(),ee(6,"input",4),$n("ngModelChange",function(a){return Bn(s.password,a)||(s.password=a),a}),J(),ee(7,"div",5)(8,"button",6),He("click",function(){return s.Login()}),we(9,"Login"),J(),ee(10,"button",6),He("click",function(){return s.LoginRapido()}),we(11,"Login Rapido"),J(),ee(12,"button",6),He("click",function(){return s.Registrarse()}),we(13,"Registrarse"),J()()()()()),i&2&&(tt(5),jn("ngModel",s.email),tt(),jn("ngModel",s.password))},dependencies:[lc,Xs,er,Js,mi]});let t=e;return t})();var n_=(()=>{let e=class e{constructor(r,i){this.auth=r,this.router=i}CloseSession(){localStorage.removeItem("userLogin"),this.router.navigateByUrl("/login")}};e.\u0275fac=function(i){return new(i||e)(B(Xe),B(it))},e.\u0275cmp=je({type:e,selectors:[["app-home"]],standalone:!0,features:[Be],decls:4,vars:0,consts:[[3,"click"]],template:function(i,s){i&1&&(ee(0,"p"),we(1,"home works!"),J(),ee(2,"button",0),He("click",function(){return s.CloseSession()}),we(3,"desloguearse"),J())}});let t=e;return t})();var r_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=je({type:e,selectors:[["app-quien-soy"]],standalone:!0,features:[Be],decls:2,vars:0,template:function(i,s){i&1&&(ee(0,"p"),we(1,"quien-soy works!"),J())}});let t=e;return t})();function pR(t,e){if(t&1&&(ee(0,"h2",3),we(1),J()),t&2){let n=ic();tt(),Mf("Usuario registrado: ",n.loggedUser,"")}}function gR(t,e){if(t&1&&(ee(0,"p",3),we(1),J()),t&2){let n=ic();tt(),Of(n.msjError)}}var i_=(()=>{let e=class e{constructor(r,i,s){this.Auth=r,this.router=i,this.firestore=s,this.email="",this.password="",this.loggedUser="",this.flagError=!1,this.msjError=""}registro(){Yv(this.Auth,this.email,this.password).then(r=>{r.user.email!==null&&(this.loggedUser=r.user.email),this.loguearCuentaRegistrada(),this.flagError=!1}).catch(r=>{switch(this.flagError=!0,r.code){case"auth/invalid-email":this.msjError="Email invalido";break;case"auth/email-already-in-use":this.msjError="Email ya en uso";break;default:this.msjError=r.code;break}})}loguearCuentaRegistrada(){return h(this,null,function*(){yield new Promise(r=>setTimeout(r,500)),vn(this.Auth,this.email,this.password).then(r=>{if(r.user.email!=null){localStorage.setItem("userLogin",r.user.email);let i=Dr(this.firestore,"logins");Pr(i,{fecha:new Date,email:this.email}),this.router.navigateByUrl("/home")}}).catch(r=>console.log(r))})}};e.\u0275fac=function(i){return new(i||e)(B(Xe),B(it),B(Dt))},e.\u0275cmp=je({type:e,selectors:[["app-register"]],standalone:!0,features:[Be],decls:12,vars:4,consts:[[1,"container","mt-5"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"text-center","text-primary"],[1,"form-control","my-2",3,"ngModelChange","ngModel"],[1,"d-grid","gap-2"],[1,"btn","btn-primary",3,"click"]],template:function(i,s){i&1&&(ee(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),we(4,"Ingresar usuario"),J(),ee(5,"input",4),$n("ngModelChange",function(a){return Bn(s.email,a)||(s.email=a),a}),J(),ee(6,"input",4),$n("ngModelChange",function(a){return Bn(s.password,a)||(s.password=a),a}),J(),ee(7,"div",5)(8,"button",6),He("click",function(){return s.registro()}),we(9,"Registrarse"),J()(),Nf(10,pR,2,1,"h2",3)(11,gR,2,1,"p",3),J()()()),i&2&&(tt(5),jn("ngModel",s.email),tt(),jn("ngModel",s.password),tt(4),rc(10,s.loggedUser!=""?10:-1),tt(),rc(11,s.flagError?11:-1))},dependencies:[Xs,er,Js,mi]});let t=e;return t})();var s_=(t,e)=>{let n=T(it);return localStorage.getItem("userLogin")!=null?(console.log("pase"),!0):(n.navigateByUrl("/login"),!1)};var o_=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:t_},{path:"home",component:n_,canActivate:[s_]},{path:"quien-soy",component:r_},{path:"registro",component:i_}];var u_="@firebase/installations",qd="0.6.6";var l_=1e4,h_=`w:${qd}`,d_="FIS_v2",mR="https://firebaseinstallations.googleapis.com/v1",yR=60*60*1e3,vR="installations",_R="Installations";var IR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vn=new Oe(vR,_R,IR);function f_(t){return t instanceof Ee&&t.code.includes("request-failed")}function p_({projectId:t}){return`${mR}/projects/${t}/installations`}function g_(t){return{token:t.token,requestStatus:2,expiresIn:ER(t.expiresIn),creationTime:Date.now()}}function m_(t,e){return h(this,null,function*(){let r=(yield e.json()).error;return Vn.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function y_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function wR(t,{refreshToken:e}){let n=y_(t);return n.append("Authorization",TR(e)),n}function v_(t){return h(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function ER(t){return Number(t.replace("s","000"))}function TR(t){return`${d_} ${t}`}function AR(r,i){return h(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=p_(t),o=y_(t),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={fid:n,authVersion:d_,appId:t.appId,sdkVersion:h_},u={method:"POST",headers:o,body:JSON.stringify(c)},l=yield v_(()=>fetch(s,u));if(l.ok){let d=yield l.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:g_(d.authToken)}}else throw yield m_("Create Installation",l)})}function __(t){return new Promise(e=>{setTimeout(e,t)})}function SR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var bR=/^[cdef][\w-]{21}$/,$d="";function CR(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=RR(t);return bR.test(n)?n:$d}catch{return $d}}function RR(t){return SR(t).substr(0,22)}function La(t){return`${t.appName}!${t.appId}`}var I_=new Map;function w_(t,e){let n=La(t);E_(n,e),DR(n,e)}function E_(t,e){let n=I_.get(t);if(n)for(let r of n)r(e)}function DR(t,e){let n=PR();n&&n.postMessage({key:t,fid:e}),NR()}var Mn=null;function PR(){return!Mn&&"BroadcastChannel"in self&&(Mn=new BroadcastChannel("[Firebase] FID Change"),Mn.onmessage=t=>{E_(t.data.key,t.data.fid)}),Mn}function NR(){I_.size===0&&Mn&&(Mn.close(),Mn=null)}var kR="firebase-installations-database",OR=1,xn="firebase-installations-store",jd=null;function zd(){return jd||(jd=dn(kR,OR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xn)}}})),jd}function xa(t,e){return h(this,null,function*(){let n=La(t),i=(yield zd()).transaction(xn,"readwrite"),s=i.objectStore(xn),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&w_(t,e.fid),e})}function T_(t){return h(this,null,function*(){let e=La(t),r=(yield zd()).transaction(xn,"readwrite");yield r.objectStore(xn).delete(e),yield r.done})}function Fa(t,e){return h(this,null,function*(){let n=La(t),i=(yield zd()).transaction(xn,"readwrite"),s=i.objectStore(xn),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&w_(t,a.fid),a})}function Gd(t){return h(this,null,function*(){let e,n=yield Fa(t.appConfig,r=>{let i=MR(r),s=VR(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===$d?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function MR(t){let e=t||{fid:CR(),registrationStatus:0};return A_(e)}function VR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Vn.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=xR(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:LR(t)}:{installationEntry:e}}function xR(t,e){return h(this,null,function*(){try{let n=yield AR(t,e);return xa(t.appConfig,n)}catch(n){throw f_(n)&&n.customData.serverCode===409?yield T_(t.appConfig):yield xa(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function LR(t){return h(this,null,function*(){let e=yield a_(t.appConfig);for(;e.registrationStatus===1;)yield __(100),e=yield a_(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield Gd(t);return r||n}return e})}function a_(t){return Fa(t,e=>{if(!e)throw Vn.create("installation-not-found");return A_(e)})}function A_(t){return FR(t)?{fid:t.fid,registrationStatus:0}:t}function FR(t){return t.registrationStatus===1&&t.registrationTime+l_<Date.now()}function UR(r,i){return h(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=jR(t,n),o=wR(t,n),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={installation:{sdkVersion:h_,appId:t.appId}},u={method:"POST",headers:o,body:JSON.stringify(c)},l=yield v_(()=>fetch(s,u));if(l.ok){let d=yield l.json();return g_(d)}else throw yield m_("Generate Auth Token",l)})}function jR(t,{fid:e}){return`${p_(t)}/${e}/authTokens:generate`}function Hd(t,e=!1){return h(this,null,function*(){let n,r=yield Fa(t.appConfig,s=>{if(!S_(s))throw Vn.create("not-registered");let o=s.authToken;if(!e&&qR(o))return s;if(o.requestStatus===1)return n=BR(t,e),s;{if(!navigator.onLine)throw Vn.create("app-offline");let a=GR(s);return n=$R(t,a),a}});return n?yield n:r.authToken})}function BR(t,e){return h(this,null,function*(){let n=yield c_(t.appConfig);for(;n.authToken.requestStatus===1;)yield __(100),n=yield c_(t.appConfig);let r=n.authToken;return r.requestStatus===0?Hd(t,e):r})}function c_(t){return Fa(t,e=>{if(!S_(e))throw Vn.create("not-registered");let n=e.authToken;return HR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function $R(t,e){return h(this,null,function*(){try{let n=yield UR(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield xa(t.appConfig,r),n}catch(n){if(f_(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield T_(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield xa(t.appConfig,r)}throw n}})}function S_(t){return t!==void 0&&t.registrationStatus===2}function qR(t){return t.requestStatus===2&&!zR(t)}function zR(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+yR}function GR(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function HR(t){return t.requestStatus===1&&t.requestTime+l_<Date.now()}function WR(t){return h(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield Gd(e);return r?r.catch(console.error):Hd(e).catch(console.error),n.fid})}function KR(t,e=!1){return h(this,null,function*(){let n=t;return yield QR(n),(yield Hd(n,e)).token})}function QR(t){return h(this,null,function*(){let{registrationPromise:e}=yield Gd(t);e&&(yield e)})}function JR(t){if(!t||!t.options)throw Bd("App Configuration");if(!t.name)throw Bd("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Bd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Bd(t){return Vn.create("missing-app-config-values",{valueName:t})}var b_="installations",YR="installations-internal",XR=t=>{let e=t.getProvider("app").getImmediate(),n=JR(e),r=st(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ZR=t=>{let e=t.getProvider("app").getImmediate(),n=st(e,b_).getImmediate();return{getId:()=>WR(n),getToken:i=>KR(n,i)}};function eD(){be(new ie(b_,XR,"PUBLIC")),be(new ie(YR,ZR,"PRIVATE"))}eD();L(u_,qd);L(u_,qd,"esm2017");var tD="/firebase-messaging-sw.js",nD="/firebase-cloud-messaging-push-scope",k_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rD="https://fcmregistrations.googleapis.com/v1",O_="google.c.a.c_id",iD="google.c.a.c_l",sD="google.c.a.ts",oD="google.c.a.e";var Ua=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Ua||{});function Pt(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function aD(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var Wd="fcm_token_details_db",cD=5,C_="fcm_token_object_Store";function uD(t){return h(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(Wd))return null;let e=null;return(yield dn(Wd,cD,{upgrade:(r,i,s,o)=>h(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(C_))return;let c=o.objectStore(C_),u=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!u){if(i===2){let l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(a=l.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Pt(l.vapidKey)}}}else if(i===3){let l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Pt(l.auth),p256dh:Pt(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Pt(l.vapidKey)}}}else if(i===4){let l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Pt(l.auth),p256dh:Pt(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Pt(l.vapidKey)}}}}})})).close(),yield io(Wd),yield io("fcm_vapid_details_db"),yield io("undefined"),lD(e)?e:null})}function lD(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var hD="firebase-messaging-database",dD=1,gs="firebase-messaging-store",Kd=null;function M_(){return Kd||(Kd=dn(hD,dD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(gs)}}})),Kd}function fD(t){return h(this,null,function*(){let e=V_(t),r=yield(yield M_()).transaction(gs).objectStore(gs).get(e);if(r)return r;{let i=yield uD(t.appConfig.senderId);if(i)return yield Yd(t,i),i}})}function Yd(t,e){return h(this,null,function*(){let n=V_(t),i=(yield M_()).transaction(gs,"readwrite");return yield i.objectStore(gs).put(e,n),yield i.done,e})}function V_({appConfig:t}){return t.appId}var pD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Se=new Oe("messaging","Messaging",pD);function gD(t,e){return h(this,null,function*(){let n=yield Zd(t),r=x_(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(Xd(t.appConfig),i)).json()}catch(o){throw Se.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Se.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Se.create("token-subscribe-no-token");return s.token})}function mD(t,e){return h(this,null,function*(){let n=yield Zd(t),r=x_(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${Xd(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Se.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Se.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Se.create("token-update-no-token");return s.token})}function yD(t,e){return h(this,null,function*(){let r={method:"DELETE",headers:yield Zd(t)};try{let s=yield(yield fetch(`${Xd(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw Se.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Se.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function Xd({projectId:t}){return`${rD}/projects/${t}/registrations`}function Zd(n){return h(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function x_({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==k_&&(i.web.applicationPubKey=r),i}var vD=7*24*60*60*1e3;function _D(t){return h(this,null,function*(){let e=yield wD(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Pt(e.getKey("auth")),p256dh:Pt(e.getKey("p256dh"))},r=yield fD(t.firebaseDependencies);if(r){if(ED(r.subscriptionOptions,n))return Date.now()>=r.createTime+vD?ID(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield yD(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return R_(t.firebaseDependencies,n)}else return R_(t.firebaseDependencies,n)})}function ID(t,e){return h(this,null,function*(){try{let n=yield mD(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield Yd(t.firebaseDependencies,r),n}catch(n){throw n}})}function R_(t,e){return h(this,null,function*(){let r={token:yield gD(t,e),createTime:Date.now(),subscriptionOptions:e};return yield Yd(t,r),r.token})}function wD(t,e){return h(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:aD(e)})})}function ED(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function D_(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return TD(e,t),AD(e,t),SD(e,t),e}function TD(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function AD(t,e){e.data&&(t.data=e.data)}function SD(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function bD(t){return typeof t=="object"&&!!t&&O_ in t}L_("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");L_("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function L_(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function CD(t){if(!t||!t.options)throw Qd("App Configuration Object");if(!t.name)throw Qd("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw Qd(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Qd(t){return Se.create("missing-app-config-values",{valueName:t})}var Jd=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=CD(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function RD(t){return h(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(tD,{scope:nD}),t.swRegistration.update().catch(()=>{})}catch(e){throw Se.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function DD(t,e){return h(this,null,function*(){if(!e&&!t.swRegistration&&(yield RD(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Se.create("invalid-sw-registration");t.swRegistration=e}})}function PD(t,e){return h(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=k_)})}function ND(t,e){return h(this,null,function*(){if(!navigator)throw Se.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Se.create("permission-blocked");return yield PD(t,e?.vapidKey),yield DD(t,e?.serviceWorkerRegistration),_D(t)})}function kD(t,e,n){return h(this,null,function*(){let r=OD(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[O_],message_name:n[iD],message_time:n[sD],message_device_time:Math.floor(Date.now()/1e3)})})}function OD(t){switch(t){case Ua.NOTIFICATION_CLICKED:return"notification_open";case Ua.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function MD(t,e){return h(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ua.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(D_(n)):t.onMessageHandler.next(D_(n)));let r=n.data;bD(r)&&r[oD]==="1"&&(yield kD(t,n.messageType,r))})}var P_="@firebase/messaging",N_="0.12.8";var VD=t=>{let e=new Jd(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>MD(e,n)),e},xD=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>ND(e,r)}};function LD(){be(new ie("messaging",VD,"PUBLIC")),be(new ie("messaging-internal",xD,"PRIVATE")),L(P_,N_),L(P_,N_,"esm2017")}function ef(){return h(this,null,function*(){try{yield to()}catch{return!1}return typeof window<"u"&&vi()&&og()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function F_(t=yt()){return ef().then(e=>{if(!e)throw Se.create("unsupported-browser")},e=>{throw Se.create("indexed-db-unsupported")}),st(ge(t),"messaging").getImmediate()}LD();var ms=class{constructor(e){return e}},U_="messaging",tf=class{constructor(){return On(U_)}};var j_="__angularfire_symbol__messagingIsSupported",nf="__angularfire_symbol__messagingIsSupportedValue";globalThis[j_]||=ef().then(t=>globalThis[nf]=t).catch(()=>globalThis[nf]=!1);var ja={async:()=>globalThis[j_],sync:()=>{let t=globalThis[nf];if(t===void 0)throw new Error(Kv("Messaging"));return t}},rf=new U("angularfire2.messaging-instances");function FD(t,e){if(!ja.sync())return null;let n=Or(U_,t,e);return n&&new ms(n)}function UD(t){return(e,n)=>{if(!ja.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new ms(r)}}var jD={provide:tf,deps:[[new he,rf]]},BD={provide:ms,useFactory:FD,deps:[[new he,rf],Ye]},$D=(()=>{class t{constructor(){L("angularfire",bt.full,"fcm")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=De({type:t});static \u0275inj=Re({providers:[BD,jD,{provide:oc,useValue:ja.async,multi:!0}]})}return t})();function B_(t,...e){return{ngModule:$D,providers:[{provide:rf,useFactory:UD(t),multi:!0,deps:[K,Ge,en,Rt,...e]}]}}var SV=ja.async;var $_=Ct(F_,!0);var q_={firebase:{apiKey:"AIzaSyC5jrsX7ruu7CCjtsmOtf7sB_UkNeqWqyw",authDomain:"tpsaladejuegos-rotelagustavo.firebaseapp.com",projectId:"tpsaladejuegos-rotelagustavo",storageBucket:"tpsaladejuegos-rotelagustavo.appspot.com",messagingSenderId:"584958712061",appId:"1:584958712061:web:5a7039b4faadeb9a478694"}};var z_=Vt(Ma(()=>Va(q_.firebase)),fs(()=>ps()));var qD="@",zD=(()=>{let e=class e{constructor(r,i,s,o,a){this.doc=r,this.delegate=i,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=T(Sf,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-MIDDJFG2.js")).catch(i=>{throw new W(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(r,i){let s=this.delegate.createRenderer(r,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new sf(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(r,i);o.use(c)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(i){nc()},e.\u0275prov=x({token:e,factory:e.\u0275fac});let t=e;return t})(),sf=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,r,i){this.delegate.insertBefore(e,n,r,i)}removeChild(e,n,r){this.delegate.removeChild(e,n,r)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){this.shouldReplay(n)&&this.replay.push(i=>i.setProperty(e,n,r)),this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.shouldReplay(n)&&this.replay.push(i=>i.listen(e,n,r)),this.delegate.listen(e,n,r)}shouldReplay(e){return this.replay!==null&&e.startsWith(qD)}};function G_(t="animations"){return bf("NgAsyncAnimations"),Br([{provide:Es,useFactory:(e,n,r)=>new zD(e,n,r,t),deps:[$e,Ds,K]},{provide:Af,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var H_={providers:[Pp(o_),z_,Vt(Jv(()=>Xv())),Vt(fs(()=>ps())),Vt(B_(()=>$_())),Vt(Ma(()=>Va({projectId:"tpsaladejuegos-rotelagustavo",appId:"1:584958712061:web:5a7039b4faadeb9a478694",storageBucket:"tpsaladejuegos-rotelagustavo.appspot.com",apiKey:"AIzaSyC5jrsX7ruu7CCjtsmOtf7sB_UkNeqWqyw",authDomain:"tpsaladejuegos-rotelagustavo.firebaseapp.com",messagingSenderId:"584958712061"}))),Vt(fs(()=>ps())),G_()]};var W_=(()=>{let e=class e{constructor(){this.title="tpsaladejuegos-rotelagustavo"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=je({type:e,selectors:[["app-root"]],standalone:!0,features:[Be],decls:1,vars:0,template:function(i,s){i&1&&As(0,"router-outlet")},dependencies:[Zc]});let t=e;return t})();Qf(W_,H_).catch(t=>console.error(t));
